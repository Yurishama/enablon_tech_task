window["%hammerhead%"].utils.removeInjectedScript(),function tu(eu){var nu=eu.document;!function(u,c,e){var t="default"in u?u.default:u,n="default"in c?c.default:c;e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var h={uiRoot:null,container:null,element:function(){return this.uiRoot||(this.uiRoot=nu.createElement("div"),u.shadowUI.getRoot().appendChild(this.uiRoot)),this.uiRoot},panelsContainer:function(){return this.container||(this.container=nu.createElement("div"),u.shadowUI.addClass(this.container,"panels-container"),this.element().appendChild(this.container)),this.container},insertFirstChildToPanelsContainer:function(t){var e=this.panelsContainer(),n=u.nativeMethods.nodeFirstChildGetter.call(e);e.insertBefore(t,n)},hide:function(){this.uiRoot&&(this.uiRoot.style.visibility="hidden")},show:function(){this.uiRoot&&(this.uiRoot.style.visibility="")},remove:function(){var t=u.shadowUI.getRoot();u.nativeMethods.nodeParentNodeGetter.call(t).removeChild(t)}},d=t.shadowUI,p=t.utils.browser,o=t.utils.featureDetection,f=t.nativeMethods,m=t.eventSandbox.eventSimulator,v=t.eventSandbox.listeners,g=n.positionUtils,y=n.domUtils,_=n.styleUtils,C=n.eventUtils,b=n.arrayUtils,E=n.selectController,w="tcOptionList",a="disabled";function S(t){var e=f.eventTargetGetter.call(t),n=E.currentEl;(e||t.srcElement)===n||y.containsElement(n,e)||y.containsElement(E.optionList,e)||x()}function T(t,e,n){var i,r=f.eventTargetGetter.call(t),s=b.indexOf(E.options,r);s<0||(n(),(i=-1<r.className.indexOf(a))&&p.isWebKit||function(t,e){var n=E.currentEl,i=n.selectedIndex,r=n.getElementsByTagName("option")[t],s=!e&&t!==i;s&&(n.selectedIndex=t),!p.isFirefox&&s&&(m.input(n),m.change(n)),p.isFirefox&&m.mousedown(p.isFirefox?r:n),o.isTouchDevice||m.mouseup(p.isFirefox?r:n),p.isFirefox&&s&&(m.input(n),m.change(n)),o.isTouchDevice||m.click(p.isFirefox?r:n),e||x()}(s,i))}function x(){y.remove(E.optionList),C.unbind(nu,"mousedown",S),E.clear()}var i=Object.freeze({__proto__:null,expandOptionList:function(t){var e=t.children;if(e.length&&!t.disabled){if(E.currentEl){var n=t===E.currentEl;if(x(),n)return}var i=E.currentEl=t,r=E.optionList=nu.createElement("div");h.element().appendChild(r),d.addClass(r,w),E.createChildren(e,r),v.addInternalEventBeforeListener(eu,["click"],T),f.setTimeout.call(eu,function(){C.bind(nu,"mousedown",S)},0),_.set(r,{position:"absolute",fontSize:_.get(i,"fontSize"),fontFamily:_.get(i,"fontFamily"),minWidth:_.getWidth(i)+"px",left:g.getOffsetPosition(i).left+"px",height:20<y.getSelectVisibleChildren(t).length?20*_.getOptionHeight(t):""});var s,o=g.getOffsetPosition(i).top,a=_.getHeight(r),l=o+_.getHeight(i)+2;l+a>_.getScrollTop(eu)+_.getHeight(eu)&&(s=o-3-a)>=_.getScrollTop(eu)&&(l=s),_.set(r,"top",l+"px")}},collapseOptionList:x,scrollOptionListByChild:function(t){var e,n,i,r,s,o,a=y.getSelectParent(t);a&&(e=_.getSelectElementSize(a),n=_.getOptionHeight(a),i=0,s=(r=Math.max(_.getScrollTop(a)/n,0))+e-1,(o=y.getChildVisibleIndex(a,t))<r?(i=n*(r-o),_.setScrollTop(a,Math.max(_.getScrollTop(a)-i,0))):s<o&&(i=n*(o-s),_.setScrollTop(a,_.getScrollTop(a)+i)))},getSelectChildCenter:function(t){var e=y.getSelectParent(t);if(!e)return{x:0,y:0};var n=_.getOptionHeight(e),i=g.getElementRectangle(t);return{x:Math.round(i.left+i.width/2),y:Math.round(i.top+n/2)}},switchOptionsByKeys:function(t,e){var n=_.getSelectElementSize(t),i=!_.hasDimensions(d.select("."+w)[0]);if(/down|up/.test(e)||(n<=1||p.isFirefox)&&(i||p.isFirefox)&&/left|right/.test(e)){for(var r=t.querySelectorAll("option"),s=[],o=0;o<r.length;o++){var a=r[o].parentElement;r[o].disabled||"optgroup"===y.getTagName(a)&&a.disabled||s.push(r[o])}var l=b.indexOf(s,r[t.selectedIndex])+(/down|right/.test(e)?1:-1);0<=l&&l<s.length&&(t.selectedIndex=b.indexOf(r,s[l]),m.input(t),m.change(t))}}}),r="Loading page...",s="modal-background",l="loading-text",I="loading-icon",A=null,M=null,B=null,N=!1;function U(){function t(){var t=c.styleUtils.getHeight(eu),e=c.styleUtils.getWidth(eu);c.styleUtils.set(A,"width",e+"px"),c.styleUtils.set(A,"height",t+"px"),c.styleUtils.set(B,{left:Math.round((e-c.styleUtils.getWidth(B))/2)+"px",top:Math.round((t-c.styleUtils.getHeight(B))/2)+"px"})}t(),c.eventUtils.bind(eu,"resize",t)}function R(){var t,e,n,i;t=h.element(),A=nu.createElement("div"),t.appendChild(A),u.shadowUI.addClass(A,s),M=nu.createElement("div"),u.nativeMethods.nodeTextContentSetter.call(M,r),t.appendChild(M),u.shadowUI.addClass(M,l),B=nu.createElement("div"),c.styleUtils.set(B,"visibility","hidden"),t.appendChild(B),u.shadowUI.addClass(B,I),U(),e=c.styleUtils.getHeight(eu),n=c.styleUtils.getWidth(eu),(i=!c.styleUtils.hasDimensions(M))&&(c.styleUtils.set(M,"visibility","hidden"),c.styleUtils.set(M,"display","block")),c.styleUtils.set(M,{left:Math.max((n-c.styleUtils.getWidth(M))/2,0)+"px",top:Math.max((e-c.styleUtils.getHeight(M))/2,0)+"px"}),i&&(c.styleUtils.set(M,"display","none"),c.styleUtils.set(M,"visibility","")),N=!0}var D=Object.freeze({__proto__:null,initAndShowLoadingText:function(){function t(){R(),c.styleUtils.set(A,"opacity",.8),c.styleUtils.set(A,"display","block"),c.styleUtils.set(M,"display","block"),e=!0}var e=!1,n=function(){e||(nu.body?t():u.nativeMethods.setTimeout.call(eu,n,0))};n(),c.eventUtils.documentReady().then(function(){e||t()})},show:function(t){N||R(),c.styleUtils.set(A,"opacity",t?0:.7),c.styleUtils.set(A,"display","block")},hide:function(){N&&(c.styleUtils.set(M,"display","none"),c.styleUtils.set(A,"display","none"))},showLoadingIcon:function(){c.styleUtils.set(B,"visibility","visible")},hideLoadingIcon:function(){c.styleUtils.set(B,"visibility","hidden")}}),k=t.shadowUI,V=n.styleUtils,O="success",P=(F.prototype.setValue=function(t){t="number"!=typeof t?0:Math.min(Math.max(t,0),100),V.set(this.valueElement,"width",t+"%")},F.prototype.setSuccess=function(t){t?k.addClass(this.containerElement,O):k.removeClass(this.containerElement,O)},F);function F(t){this.containerElement=nu.createElement("div"),this.valueElement=nu.createElement("div"),t.appendChild(this.containerElement),this.containerElement.appendChild(this.valueElement),k.addClass(this.containerElement,"progress-bar"),k.addClass(this.valueElement,"value")}var $=t.shadowUI,L=t.nativeMethods,z=n.eventUtils,H=n.styleUtils,W="progress-panel",j="title",G="content",q=(Y._getInvisibleElementProperty=function(t,e){var n="none"===H.get(t,"display");n&&H.set(t,"display","block");var i=t[e];return n&&H.set(t,"display","none"),i},Y._showAtWindowCenter=function(t){var e=Y._getInvisibleElementProperty(t,"offsetHeight"),n=Y._getInvisibleElementProperty(t,"offsetWidth"),i=Math.round(H.getHeight(eu)/2-e/2),r=Math.round(H.getWidth(eu)/2-n/2);H.set(t,{left:r+"px",top:i+"px"})},Y.prototype._setCurrentProgress=function(){var t=Math.round((L.dateNow()-this.startTime)/this.maxTimeout*100);this.progressBar.setValue(t)},Y.prototype._setSuccess=function(t){this.progressBar.setSuccess(t)},Y.prototype._stopAnimation=function(){L.clearInterval.call(eu,this.animationInterval)},Y.prototype._animate=function(t,e,n,i){var r,s,o,a=this,l=L.dateNow(),u=n?0:1;n&&(H.set(t,"opacity",u),H.set(t,"display","block")),this._stopAnimation(),this.animationInterval=L.setInterval.call(eu,function(){r=L.dateNow()-l,s=Math.min(r/e,1),o=.5-Math.cos(s*Math.PI)/2,H.set(t,"opacity",u+(n?o:-o)),1===s&&(a._stopAnimation(),i&&i())},10)},Y.prototype._showPanel=function(){z.bind(eu,"resize",this.disposePanel),this._animate(this.panelDiv,200,!0)},Y.prototype._hidePanel=function(t){var e=this;this.startTime=null,z.unbind(eu,"resize",this.disposePanel),this._animate(this.panelDiv,t?0:600,!1,function(){return H.set(e.panelDiv,"display","none")})},Y.prototype.show=function(t,e){var n=this;this.startTime=L.dateNow(),this.maxTimeout=e,L.nodeTextContentSetter.call(this.titleDiv,t),this._setSuccess(!1),this.openingTimeout=L.setTimeout.call(eu,function(){n.openingTimeout=null,n._setCurrentProgress(),n._showPanel(),n.updateInterval=L.setInterval.call(eu,function(){return n._setCurrentProgress()},100)},300)},Y.prototype.close=function(t){var e=this;t&&this._setSuccess(!0),this.openingTimeout&&(L.clearTimeout.call(eu,this.openingTimeout),this.openingTimeout=null),this.updateInterval&&(L.clearInterval.call(eu,this.updateInterval),this.updateInterval=null),t?this.startTime&&L.dateNow()-this.startTime<1e3?L.setTimeout.call(eu,function(){L.setTimeout.call(eu,function(){return e._hidePanel(!1)},200)},100):L.setTimeout.call(eu,function(){return e._hidePanel(!1)},200):this._hidePanel(!0)},Y);function Y(){var t=this;this.startTime=null,this.openingTimeout=null,this.updateInterval=null,this.animationInterval=null,this.panelDiv=nu.createElement("div"),h.element().appendChild(this.panelDiv),this.titleDiv=nu.createElement("div"),this.panelDiv.appendChild(this.titleDiv),this.contentDiv=nu.createElement("div"),this.panelDiv.appendChild(this.contentDiv),$.addClass(this.panelDiv,W),$.addClass(this.titleDiv,j),$.addClass(this.contentDiv,G),Y._showAtWindowCenter(this.panelDiv),this.progressBar=new P(this.contentDiv),this.disposePanel=function(){return Y._showAtWindowCenter(t.panelDiv)}}var X=function(t,e){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function K(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}X(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function J(t,o,a,l){return new(a=a||e)(function(n,e){function i(t){try{s(l.next(t))}catch(t){e(t)}}function r(t){try{s(l.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(i,r)}s((l=l.apply(t,o||[])).next())})}function Q(n,i){var r,s,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function t(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;l&&e[l=0]&&(a=0),a;)try{if(r=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){a.label=e[1];break}if(6===e[0]&&a.label<o[1]){a.label=o[1],o=e;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(e);break}o[2]&&a.ops.pop(),a.trys.pop();continue}e=i.call(n,a)}catch(t){e=[6,t],s=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var Z=t.shadowUI,tt=t.nativeMethods,et=n.styleUtils,nt="determinate",it=(rt.prototype._setCurrentProgress=function(){var t=(tt.dateNow()-this.startTime)/this.maxTimeout,e=Math.min(Math.max(t,0),1),n=et.getWidth(this.progressBar),i=Math.round(n*e);et.set(this.firstValueElement,"width",i+"px")},rt.prototype.start=function(t,e){var n=this;Z.addClass(this.progressBar,nt),this.maxTimeout=t,this.startTime=e||tt.dateNow(),this._setCurrentProgress(),this.animationInterval=tt.setInterval.call(eu,function(){return n._setCurrentProgress()},10)},rt.prototype.stop=function(){this.animationInterval&&(tt.clearInterval.call(eu,this.animationInterval),this.animationInterval=null)},rt.prototype.reset=function(){et.set(this.firstValueElement,"width",0),Z.removeClass(this.progressBar,nt)},rt);function rt(t,e){this.progressBar=t,this.firstValueElement=e,this.maxTimeout=null,this.startTime=null,this.animationInterval=null}function st(t,e,n){if(e.x===t.x)return 0;var i=(e.y-t.y)/(e.x-t.x),r=t.x*(t.y-e.y)/(e.x-t.x)+t.y;return Math.round(i*n+r)}var ot=t.shadowUI,at=t.nativeMethods,lt=n.styleUtils,ut={time:2800,points:[.815,.395],positionByCompletePercent:{0:{left:-35,right:100},.6:{left:100,right:-90},1:{left:100,right:-90}}},ct={time:3e3,points:[.84,1],positionByCompletePercent:{0:{left:-200,right:100},.6:{left:107,right:-8},1:{left:107,right:-8}}},ht=0,dt=.6,pt=1,ft="indeterminate",mt=(vt._updateValueAnimation=function(t,e,n){var i,r,s,o,a,l,u,c,h,d,p=n.time,f=n.points,m=n.positionByCompletePercent,v=at.dateNow()-t,g=(i=v/p,r=f[0],s=f[1],3*Math.pow(1-i,2)*i*r+3*(1-i)*i*i*s+i*i*i),y=(c=(l=(o=g)<dt)?dt:pt,h=(a=m)[u=l?ht:dt],d=a[c],{left:st({x:u,y:h.left},{x:c,y:d.left},o),right:st({x:u,y:h.right},{x:c,y:d.right},o)}),_=y.left,C=y.right;lt.set(e,"left",Math.round(_)+"%"),lt.set(e,"right",Math.round(C)+"%")},vt.prototype._clearFirstValueAnimation=function(){this.animationInterval&&(at.clearInterval.call(eu,this.animationInterval),this.animationInterval=null),lt.set(this.firstValue,"left","-35%"),lt.set(this.firstValue,"right","100%")},vt.prototype._clearSecondValueAnimation=function(){this.secondValueAnimationInterval&&(at.clearInterval.call(eu,this.secondValueAnimationInterval),this.secondValueAnimationInterval=null),lt.set(this.secondValue,"left","-200%"),lt.set(this.secondValue,"right","100%")},vt.prototype._startFirstValueAnimation=function(){var t=this;this._clearFirstValueAnimation();var e=at.dateNow();this.animationInterval=at.setInterval.call(eu,function(){vt._updateValueAnimation(e,t.firstValue,ut)},10)},vt.prototype._startSecondValueAnimation=function(){var t=this;this._clearSecondValueAnimation();var e=at.dateNow();this.secondValueAnimationInterval=at.setInterval.call(eu,function(){vt._updateValueAnimation(e,t.secondValue,ct)},10)},vt.prototype._startAnimation=function(){var t=this;this._startFirstValueAnimation(),this.secondValueAnimationTimeout=at.setTimeout.call(eu,function(){return t._startSecondValueAnimation()},1e3),this.restartAnimationTimeout=at.setTimeout.call(eu,function(){return t._startAnimation()},1950)},vt.prototype._stopAnimation=function(){this._clearFirstValueAnimation(),this._clearSecondValueAnimation(),this.secondValueAnimationTimeout&&(at.clearInterval.call(eu,this.secondValueAnimationTimeout),this.secondValueAnimationTimeout=null),this.restartAnimationTimeout&&(at.clearInterval.call(eu,this.restartAnimationTimeout),this.restartAnimationTimeout=null)},vt.prototype.start=function(){ot.addClass(this.progressBar,ft),this._startAnimation()},vt.prototype.stop=function(){ot.removeClass(this.progressBar,ft),this._stopAnimation()},vt);function vt(t,e,n){this.progressBar=t,this.firstValue=e,this.secondValue=n,this.animationInterval=null,this.secondValueAnimationInterval=null,this.secondValueAnimationTimeout=null,this.restartAnimationTimeout=null}var gt=t.shadowUI,yt=n.styleUtils,_t=(Ct.prototype._create=function(t){this.progressBar=nu.createElement("div"),gt.addClass(this.progressBar,"progress-bar"),t.appendChild(this.progressBar);var e=nu.createElement("div");gt.addClass(e,"value-container"),this.progressBar.appendChild(e),this.firstValueElement=nu.createElement("div"),gt.addClass(this.firstValueElement,"value"),e.appendChild(this.firstValueElement),this.secondValueElement=nu.createElement("div"),gt.addClass(this.secondValueElement,"value"),e.appendChild(this.secondValueElement)},Ct.prototype.show=function(){yt.set(this.progressBar,"visibility","visible")},Ct.prototype.hide=function(){yt.set(this.progressBar,"visibility","hidden")},Ct);function Ct(t){this.progressBar=null,this.firstValueElement=null,this.secondValueElement=null,this._create(t),this.determinateIndicator=new it(this.progressBar,this.firstValueElement),this.indeterminateIndicator=new mt(this.progressBar,this.firstValueElement,this.secondValueElement)}var bt,Et="start-waiting-element",wt="end-waiting-element-request",St="end-waiting-element-response",Tt="start-waiting-assertion-retries",xt="end-waiting-assertion-retries-request",It="end-waiting-assertion-retries-response",At="step",Mt="resume",Bt=t.Promise,Nt=t.shadowUI,Ut=t.nativeMethods,Rt=t.eventSandbox.message,Dt=t.utils.browser,kt=t.utils.featureDetection,Vt=t.eventSandbox.listeners,Ot=n.styleUtils,Pt=n.eventUtils,Ft=n.domUtils,$t=n.serviceUtils,Lt=n.arrayUtils,zt="status-bar-debugging",Ht="waiting-element-failed",Wt="waiting-element-success",jt="%testCafeStatusPrefix%",Gt=(K(qt,bt=$t.EventEmitter),Object.defineProperty(qt.prototype,"visibleHeight",{get:function(){return this.maxHeight=Math.max(this.maxHeight,Ot.getHeight(this.statusBar)),this.maxHeight},enumerable:!1,configurable:!0}),qt.prototype._createButton=function(t,e){var n=nu.createElement("div"),i=nu.createElement("div"),r=nu.createElement("span");return Ut.nodeTextContentSetter.call(r,t),Nt.addClass(n,"button"),Nt.addClass(n,e),Nt.addClass(i,"button-icon"),Dt.isSafari&&(r.style.position="relative",r.style.top="1px"),n.appendChild(i),n.appendChild(r),n},qt.prototype._createIconArea=function(){this.icon=nu.createElement("div"),Nt.addClass(this.icon,"icon"),this.statusBar.appendChild(this.icon)},qt.prototype._createInformationArea=function(){this.infoContainer=nu.createElement("div"),Nt.addClass(this.infoContainer,"info-container"),this.statusBar.appendChild(this.infoContainer);var t=nu.createElement("div");Nt.addClass(t,"info-text-container"),this.infoContainer.appendChild(t);var e=nu.createElement("div");Nt.addClass(e,"status-container"),t.appendChild(e),this.statusDiv=nu.createElement("div"),this.statusDiv=nu.createElement("div"),Ut.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText("Loading Web Page...")),Nt.addClass(this.statusDiv,"status"),Nt.addClass(this.statusDiv,"info"),e.appendChild(this.statusDiv);var n=nu.createElement("div");Ut.nodeTextContentSetter.call(n,"".concat(this.fixtureName," - ").concat(this.testName)),Nt.addClass(n,"fixture"),Nt.addClass(n,"info"),e.appendChild(n);var i=nu.createElement("div");Ut.nodeTextContentSetter.call(i,this.userAgent),Nt.addClass(i,"user-agent"),t.appendChild(i)},qt.prototype._createActionsArea=function(){var t=this;this.actionsContainer=nu.createElement("div"),Nt.addClass(this.actionsContainer,"actions-container"),this.statusBar.appendChild(this.actionsContainer),this.buttons=nu.createElement("div"),Nt.addClass(this.buttons,"buttons"),this.actionsContainer.appendChild(this.buttons),this.unlockButton=this._createButton("Unlock Page","locked"),this.resumeButton=this._createButton("Resume","resume"),this.nextButton=this._createButton("Next Action","step"),this.finishButton=this._createButton("Finish","finish"),this.buttons.appendChild(this.unlockButton),this.buttons.appendChild(this.resumeButton),this.buttons.appendChild(this.nextButton),this.actionsContainer.style.display="none",this._bindClickOnce([this.unlockButton],function(){Nt.removeClass(t.unlockButton,"locked"),Nt.addClass(t.unlockButton,"unlocked"),Ut.nodeTextContentSetter.call(t.unlockButton.querySelector("span"),"Page unlocked"),t.state.locked=!1,t.emit(t.UNLOCK_PAGE_BTN_CLICK,{})}),this.unlockButton.style.display="none"},qt.prototype._create=function(){this.statusBar=nu.createElement("div"),Nt.addClass(this.statusBar,"status-bar"),this._createIconArea(),this._createInformationArea(),this._createActionsArea(),this.progressBar=new _t(this.infoContainer),this.progressBar.indeterminateIndicator.start(),this.progressBar.show(),h.panelsContainer().appendChild(this.statusBar),this._bindHandlers(),this.state.created=!0},qt.prototype._createBeforeReady=function(){var t,e=this;this.state.created||(t=eu).top!==t||(nu.body?this._create():Ut.setTimeout.call(eu,function(){return e._createBeforeReady()},0))},qt.prototype._animate=function(t){var e,n,i,r=this,s=Ut.dateNow(),o=parseInt(Ot.get(this.statusBar,"opacity"),10)||0;this._stopAnimation(),t&&(Ot.set(this.statusBar,"visibility",""),this.state.hidden=!1),this.animationInterval=Ut.setInterval.call(eu,function(){e=Ut.dateNow()-s,n=Math.min(e/500,1),i=.5-Math.cos(n*Math.PI)/2,Ot.set(r.statusBar,"opacity",o+(t?i:-i)),1===n&&(r._stopAnimation(),t||(Ot.set(r.statusBar,"visibility","hidden"),r.state.hidden=!0),r.state.showing=!1,r.state.hiding=!1)},10)},qt.prototype._stopAnimation=function(){this.animationInterval&&(Ut.clearInterval.call(eu,this.animationInterval),this.animationInterval=null)},qt.prototype._fadeOut=function(){this.state.hiding||this.state.debugging||(this.state.showing=!1,this.state.hiding=!0,this._animate())},qt.prototype._fadeIn=function(){this.state.showing||this.state.debugging||(this.state.hiding=!1,this.state.showing=!0,this._animate(!0))},qt.prototype._bindHandlers=function(){var e=this;Vt.initElementListening(eu,["resize"]),Vt.addInternalEventBeforeListener(eu,["resize"],function(){e.windowHeight=eu.innerHeight}),Vt.addFirstInternalEventBeforeListener(eu,["mousemove","mouseout","touchmove"],function(t){"mouseout"!==t.type||t.relatedTarget?"mousemove"!==t.type&&"touchmove"!==t.type||(t.clientY>e.windowHeight-e.visibleHeight?e._fadeOut(t):e.state.hidden&&e._fadeIn(t)):e._fadeIn(t)})},qt.prototype._bindClickOnce=function(n,i){var r=this,s=!this.nativeAutomation&&kt.isTouchDevice?"touchstart":"mousedown",o=function(t){var e=Ut.eventTargetGetter.call(t);Lt.find(n,function(t){return Ft.containsElement(t,e)})?(Pt.preventDefault(t),Vt.removeInternalEventBeforeListener(eu,[s],o),i(t)):Ft.containsElement(r.statusBar,e)&&Pt.preventDefault(t)};Vt.addInternalEventBeforeListener(eu,[s],o)},qt.prototype._initChildListening=function(){var n=this;Rt.on(Rt.SERVICE_MSG_RECEIVED_EVENT,function(t){var e=t.message;e.cmd===Et?n.showWaitingElementStatus(e.timeout):e.cmd===wt?n.hideWaitingElementStatus(e.waitingSuccess).then(function(){return Rt.sendServiceMsg({cmd:St},t.source)}):e.cmd===Tt?n.showWaitingAssertionRetriesStatus(e.timeout):e.cmd===xt&&n.hideWaitingAssertionRetriesStatus(e.waitingSuccess).then(function(){return Rt.sendServiceMsg({cmd:It},t.source)})})},qt.prototype._resetState=function(){this.state.debugging=!1,Nt.removeClass(h.panelsContainer(),zt),this.actionsContainer.style.display="none",this.unlockButton.style.display="none",Ut.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText("")),this.progressBar.hide()},qt.prototype._getFullStatusText=function(t){var e=this.contextStorage.getItem(jt)||"";return e+(e&&t?". ":"")+t},qt.prototype._showWaitingStatus=function(){var t=this.state.assertionRetries?"Waiting for assertion execution...":"Waiting for element to appear...";Ut.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText(t)),this.progressBar.show()},qt.prototype._hideWaitingStatus=function(e){var n=this;return new Bt(function(t){Ut.setTimeout.call(eu,function(){n.state.waiting||n.state.debugging||(Nt.removeClass(n.statusBar,Wt),Nt.removeClass(n.statusBar,Ht),n.progressBar.determinateIndicator.reset(),n._resetState()),t()},e?0:500)})},qt.prototype._showDebuggingStatus=function(t){var r=this;return new Bt(function(i){r.state.debugging=!0,r.state.locked=!0,Nt.addClass(h.panelsContainer(),zt),t?(r.buttons.removeChild(r.nextButton),r.buttons.removeChild(r.resumeButton),r.buttons.appendChild(r.finishButton),Ut.nodeTextContentSetter.call(r.statusDiv,r._getFullStatusText("Test failed")),Nt.removeClass(r.statusBar,Wt),Nt.addClass(r.statusBar,Ht)):Ut.nodeTextContentSetter.call(r.statusDiv,r._getFullStatusText("Debugging test...")),r.actionsContainer.style.display="",r.unlockButton.style.display="",r._bindClickOnce([r.resumeButton,r.nextButton,r.finishButton],function(t){var e=Ut.eventTargetGetter.call(t),n=Ft.containsElement(r.nextButton,e);r._resetState(),i(n?At:Mt)})})},qt.prototype._setWaitingStatus=function(t,e){var n=this;this.state.waiting=!0,this.progressBar.determinateIndicator.start(t,e),this.showingTimeout=Ut.setTimeout.call(eu,function(){n.showingTimeout=null,n._showWaitingStatus()},300)},qt.prototype._resetWaitingStatus=function(t){this.state.waiting=!1,this.progressBar.determinateIndicator.stop(),t?Nt.addClass(this.statusBar,Wt):Nt.addClass(this.statusBar,Ht);var e=this.showingTimeout&&t;return this.showingTimeout&&(Ut.clearTimeout.call(eu,this.showingTimeout),this.showingTimeout=null,t||this._showWaitingStatus()),this._hideWaitingStatus(e)},qt.prototype.hidePageLoadingStatus=function(){this.state.created||this._create(),this.progressBar.indeterminateIndicator.stop(),this._resetState()},qt.prototype.showDebuggingStatus=function(t){return this._stopAnimation(),Ot.set(this.statusBar,"opacity",1),Ot.set(this.statusBar,"visibility",""),this.state.hiden=!1,this._showDebuggingStatus(t)},qt.prototype.showWaitingElementStatus=function(t){this.state.assertionRetries||this._setWaitingStatus(t)},qt.prototype.hideWaitingElementStatus=function(t){return this.state.assertionRetries?Bt.resolve():this._resetWaitingStatus(t)},qt.prototype.showWaitingAssertionRetriesStatus=function(t,e){this.state.assertionRetries=!0,this._setWaitingStatus(t,e)},qt.prototype.hideWaitingAssertionRetriesStatus=function(t){var e=this;return this._resetWaitingStatus(t).then(function(){e.state.assertionRetries=!1})},qt.prototype.setStatusPrefix=function(t){this.contextStorage.setItem(jt,t),Ut.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText(""))},qt);function qt(t,e,n,i,r){var s=bt.call(this)||this;return s.UNLOCK_PAGE_BTN_CLICK="testcafe|ui|status-bar|unlock-page-btn-click",s.userAgent=t,s.fixtureName=e,s.testName=n,s.contextStorage=i,s.nativeAutomation=r,s.statusBar=null,s.infoContainer=null,s.actionsContainer=null,s.icon=null,s.resumeButton=null,s.finishButton=null,s.nextButton=null,s.statusDiv=null,s.buttons=null,s.progressBar=null,s.animationInterval=null,s.showingTimeout=null,s.windowHeight=nu.documentElement?Ot.getHeight(eu):eu.innerHeight,s.maxHeight=0,s.state={created:!1,showing:!1,hiding:!1,debugging:!1,waiting:!1,assertionRetries:!1,hidden:!1},s.currentView=null,s._createBeforeReady(),s._initChildListening(),s}var Yt,Xt=n.sendRequestToFrame,Kt=t.eventSandbox.message,Jt=(K(Qt,Yt=Gt),Qt.prototype.showWaitingElementStatus=function(t){Kt.sendServiceMsg({cmd:Et,timeout:t},eu.top)},Qt.prototype.hideWaitingElementStatus=function(t){return Xt({cmd:wt,waitingSuccess:t},St,eu.top)},Qt.prototype.showWaitingAssertionRetriesStatus=function(t){Kt.sendServiceMsg({cmd:Tt,timeout:t},eu.top)},Qt.prototype.hideWaitingAssertionRetriesStatus=function(t){return Xt({cmd:xt,waitingSuccess:t},It,eu.top)},Qt);function Qt(){return Yt.call(this)||this}var Zt="ui|cursor|move|request",te="ui|cursor|leftbuttondown|request",ee="ui|cursor|rightbuttondown|request",ne="ui|cursor|buttonup|request",ie="ui|cursor|move|response",re="ui|cursor|leftbuttondown|response",se="ui|cursor|rightbuttondown|response",oe="ui|cursor|buttonup|response",ae=t.Promise,le=t.shadowUI,ue=t.utils.featureDetection,ce=t.eventSandbox.message,he=n.styleUtils,de=n.positionUtils,pe="l-mouse-down",fe="r-mouse-down",me=[pe,fe].join(" ");ce.on(ce.SERVICE_MSG_RECEIVED_EVENT,function(t){var e=t.message;switch(e.cmd){case Zt:ve.move(de.getIframePointRelativeToParentFrame({x:e.x,y:e.y},t.source)).then(function(){return ce.sendServiceMsg({cmd:ie},t.source)});break;case te:ve.leftButtonDown().then(function(){return ce.sendServiceMsg({cmd:re},t.source)});break;case ee:ve.rightButtonDown().then(function(){return ce.sendServiceMsg({cmd:se},t.source)});break;case ne:ve.buttonUp().then(function(){return ce.sendServiceMsg({cmd:oe},t.source)})}});var ve={cursorElement:null,x:50,y:50,pointerOffsetX:0,pointerOffsetY:0,_createElement:function(){this.cursorElement=nu.createElement("div"),le.addClass(this.cursorElement,"cursor"),ue.isTouchDevice&&(le.addClass(this.cursorElement,"touch"),this.pointerOffsetX=Math.ceil(he.getWidth(this.cursorElement)/2),this.pointerOffsetY=Math.ceil(he.getHeight(this.cursorElement)/2)),h.element().appendChild(this.cursorElement)},_ensureCursorElement:function(){return this.cursorElement||this._createElement(),!0},isVisible:function(){return this.cursorElement&&"hidden"!==he.get(this.cursorElement,"visibility")},hide:function(){this._ensureCursorElement()&&this.isVisible()&&he.set(this.cursorElement,"visibility","hidden")},show:function(){this._ensureCursorElement()&&he.set(this.cursorElement,"visibility","")},move:function(t){return this._ensureCursorElement()&&(this.x=t.x,this.y=t.y,he.set(this.cursorElement,{left:this.x-this.pointerOffsetX+"px",top:this.y-this.pointerOffsetY+"px"})),ae.resolve()},leftButtonDown:function(){return this._ensureCursorElement()&&(le.removeClass(this.cursorElement,me),le.addClass(this.cursorElement,pe)),ae.resolve()},rightButtonDown:function(){return this._ensureCursorElement()&&(le.removeClass(this.cursorElement,me),le.addClass(this.cursorElement,fe)),ae.resolve()},buttonUp:function(){return this._ensureCursorElement()&&le.removeClass(this.cursorElement,me),ae.resolve()}},ge={move:function(t){var e={cmd:Zt,x:t.x,y:t.y};return c.sendRequestToFrame(e,ie,eu.parent)},leftButtonDown:function(){return c.sendRequestToFrame({cmd:te},re,eu.parent)},rightButtonDown:function(){return c.sendRequestToFrame({cmd:ee},se,eu.parent)},buttonUp:function(){return c.sendRequestToFrame({cmd:ne},oe,eu.parent)}},ye={screenshotMark:null,_createMark:function(){this.screenshotMark=nu.createElement("img"),u.shadowUI.addClass(this.screenshotMark,"screenshot-mark"),this.screenshotMark.style.right=10/eu.devicePixelRatio+"px",this.screenshotMark.style.width=32/eu.devicePixelRatio+"px",this.screenshotMark.style.height=10/eu.devicePixelRatio+"px",this.hide(),u.shadowUI.getRoot().appendChild(this.screenshotMark)},hide:function(){this.screenshotMark&&(this.screenshotMark.style.visibility="hidden")},show:function(t){this.screenshotMark||this._createMark(),u.nativeMethods.imageSrcSetter.call(this.screenshotMark,t),this.screenshotMark.style.visibility=""}},_e=t.shadowUI,Ce=t.nativeMethods;function be(t){var e=t.tag,n=void 0===e?"div":e,i=t.class,r=t.src,s=t.text,o=t.type,a=t.value,l=nu.createElement(n);return o&&Ce.setAttribute.call(l,"type",o),a&&Ce.inputValueSetter.call(l,a),r&&Ce.setAttribute.call(l,"src",r),i&&_e.addClass(l,i),s&&Ce.nodeTextContentSetter.call(l,s),l}var Ee=n.styleUtils;function we(t,e){for(var n in e)Ee.set(t,n,e[n])}var Se={tag:"input",type:"button",value:"Pick",class:"pick-button"},Te={tag:"input",type:"text",class:"selector-input"},xe={class:"match-indicator",text:"No Matching Elements"},Ie={class:"expand-selector-list"},Ae={class:"selector-input-container"},Me={tag:"input",type:"button",value:"Copy"},Be={class:"selector-panel-toggle-button-container"},Ne={tag:"input",type:"button",class:"selector-panel-toggle-button"},Ue={class:"selectors-list"},Re={tag:"span"},De={class:"selector-inspector-panel"},ke={class:"selector-inspector-panel-container"},Ve={class:"element-frame"},Oe={class:"tooltip"},Pe={class:"arrow"},Fe={tag:"input",type:"text",class:"auxiliary-input"};function $e(t){var e;t.parentElement||(e=h.panelsContainer(),h.element().insertBefore(t,e))}function Le(t){t.parentElement&&h.element().removeChild(t)}var ze,He=eu["%testCafeCore%"],We=function(t,e){void 0===e&&(e=!1),this.type=t,this.editable=e,this.disabled=void 0},je=(K(Ge,ze=We),Ge);function Ge(t){return ze.call(this,t.toLowerCase(),!0)||this}var qe={edited:"$edited$",byTagName:"$tagName$",byId:"id",byText:"$text$",byClassAttr:"class",byAttr:"$attr$",byTagTree:"$dom$"},Ye=[new We(qe.byTagName),new We(qe.byId),new We(qe.byText),new We(qe.byClassAttr),new We(qe.byAttr),new We(qe.byTagTree)],Xe=qe.byTagTree,Ke=Object.freeze({__proto__:null,CustomSelectorRule:je,DEFAULT_SELECTOR_RULES:Ye,RULE_TYPE:qe,SelectorRule:We,UNSWITCHABLE_RULE_TYPE:Xe}),Je=(Qe.prototype.concat=function(t){return t.type===this.type?new Qe(this.type,this.filter.concat(" ",t.filter)):null},Qe);function Qe(t,e){this.type=t,this.filter=e}var Ze="index",tn="tag",en="attr",nn=He.domUtils,rn=He.arrayUtils;function sn(t,e){var n=nn.getElementIndexInParent(e,t),i=new Je(tn,nn.getTagName(t));return 0===n?[i]:[i,new Je(Ze,n)]}function on(t,e){for(var n=t.parentElement,i=[];n;){if(n===e)return i;i.push(n),n=n.parentElement}return i}var an=He.domUtils,ln=He.arrayUtils,un=(Object.defineProperty(cn.prototype,"isCustom",{get:function(){return this.ancestorSelectorDescriptor?this.isCustomRule||this.ancestorSelectorDescriptor.isCustomRule:this.isCustomRule},enumerable:!1,configurable:!0}),cn.prototype._getStringArrayRepresentation=function(){return function(t){for(var e=[],n=0,i=t;n<i.length;n++){var r,s=i[n];0===ln.indexOf(t,s)?e.push("Selector('".concat(s.filter,"')")):"text"===s.type?e.push(".withText('".concat(s.filter,"')")):s.type===Ze?e.push(".nth(".concat(s.filter,")")):s.type===tn?e.push(".find('".concat(s.filter,"')")):s.type===en&&(r=s.filter.attrValueRe?", ".concat(s.filter.attrValueRe):"",e.push(".withAttribute('".concat(s.filter.attrName,"'").concat(r,")")))}return e}(this._concatFilterOptions())},cn.prototype._addFilterByIndex=function(t){var e;1<t.length&&0!==(e=ln.indexOf(t,this.element))&&this.filterOptions.push(new Je(Ze,e))},cn.prototype._concatFilterOptions=function(){var t=this.ancestorSelectorDescriptor,e=[];t&&(e=t._concatFilterOptions()),this.cssSelector&&e.push(new Je(tn,this.cssSelector));var n=ln.concat(e,this.filterOptions);return ln.reduce(n,function(t,e){if(e.type===tn&&t.length){var n=t[t.length-1];if(n.type===tn)return t[t.length-1]=n.concat(e),t}return t.push(e),t},[])},cn.prototype._getElements=function(){if(this.ruleType===qe.byTagTree)return[this.element];var t=this.ancestorSelectorDescriptor?this.ancestorSelectorDescriptor.element:an.findDocument(this.element),e=null;if(this.cssSelector)try{var n=eu.eval("(function(){return '".concat(this.cssSelector,"';})();")),e=ln.from(t.querySelectorAll(n))}catch(t){return null}else e=[t];return 0===(e=e.length&&this.filter?this.filter(e):e).length||-1===ln.indexOf(e,this.element)?[]:e},cn.createFromInstance=function(t,e){return new cn({ancestorSelectorDescriptor:e,cssSelector:t.cssSelector,element:t.element,filter:t.filter,filterOptions:[].concat(t.filterOptions||[]),isCustomRule:t.isCustomRule,ruleType:t.ruleType})},cn.prototype.makeUnique=function(){var t=this.ancestorSelectorDescriptor,e=t?t._getElements():[],n=!t||e?this._getElements():null;n&&(t&&t._addFilterByIndex(e),this._addFilterByIndex(n),this.stringArray=this._getStringArrayRepresentation())},cn);function cn(t){this.ruleType=t.ruleType,this.isCustomRule=t.isCustomRule,this.element=t.element,this.ancestorSelectorDescriptor=t.ancestorSelectorDescriptor,this.cssSelector=t.cssSelector,this.filterOptions=ln.concat([],t.filterOptions||[]),this.filter=t.filter,this.stringArray=this._getStringArrayRepresentation()}var hn=(dn.prototype._init=function(){},dn.prototype._shouldCreate=function(){throw new Error("Not implemented")},dn.prototype._getDescriptor=function(){throw new Error("Not implemented")},dn.prototype.create=function(t,e){return this.element=t,this._init(),this._shouldCreate(e)?this._getDescriptor(e):null},dn);function dn(t){this.type=t,this.element=null}var pn,fn=He.domUtils,mn=/html|body/,vn=/header|footer|main/,gn=(K(yn,pn=hn),yn.prototype._init=function(){this.tagName=fn.getTagName(this.element)},yn.prototype._shouldCreate=function(){return this.useTopLevelParents&&mn.test(this.tagName)||vn.test(this.tagName)},yn.prototype._getDescriptor=function(){return new un({ruleType:this.type,element:this.element,cssSelector:this.tagName})},yn);function yn(t){void 0===t&&(t=!0);var e=pn.call(this,qe.byTagName)||this;return e.tagName="",e.useTopLevelParents=t,e}function _n(t){return t.replace(/\\/g,"\\\\\\$&").replace(/'/g,"\\\\\\$&").replace(/(\!|#|"|\$|%|&|\(|\||\)|\*|\+|,|\.|\/|:|;|<|=|>|\?|@|\[|\]|\^|`|{|\||}|~)/g,"\\\\$&")}function Cn(t){return t.replace(/'|"|\\|\||\-|\*|\?|\+|\^|\$|\[|\]/g,"\\$&").replace(/\(|\)/g,"\\S")}var bn=eu["%hammerhead%"],En=/[\\^$*+?.()|[\]{}]/g,wn=He.selectorAttributeFilter,Sn=He.arrayUtils,Tn=bn.nativeMethods;function xn(t){return"string"==typeof t?new RegExp(t.replace(En,"\\$&")):t}var In=He.domUtils,An=He.arrayUtils,Mn=/\$ctl\d+|ctl\d+\$|_ctl\d+|ctl\d+_|^ctl\d+$/g,Bn="!!!!!separator!!!!!",Nn="!!!!!anyNumber!!!!!",Un=new RegExp(Bn,"g"),Rn=new RegExp(Nn,"g"),Dn=/\s{2,}/g,kn="class";function Vn(t,e,n,i,r){return new un({ancestorSelectorDescriptor:r,cssSelector:n,element:e,filter:(o=(s=i).attrName,a=s.attrValueRe,function(t){return Sn.filter(t,function(t){return wn(t,0,void 0,xn(o),xn(a))})}),filterOptions:new Je(en,i),ruleType:t});var s,o,a}function On(t,e,n,i){var r=In.getTagName(e),s="",o=null;return An.forEach(n,function(t){var e=t.name,n=t.value,i=!1,r=!1;50<n.replace(Dn," ").length&&(n=n.substr(0,50),i=!0),Mn.test(n)&&(r=!0,n=n.replace(Mn,function(t){return t.replace(/\d+/,Nn)})),Dn.test(n)&&(r=!0,n=n.replace(Dn,Bn)),r?o||(n=(n=Cn(n)).replace(Rn,"\\d+").replace(Un,"\\s+"),o={attrName:e,attrValueRe:new RegExp(n)}):(n=e===kn?_n(n).trimEnd():n.replace(/\\/g,"\\\\\\$&").replace(/'/g,"\\\\\\$&").replace(/"/g,"\\\\$&"),s+=e!==kn||i?"[".concat(e).concat(i?"^":"").concat(n?'="'.concat(n,'"'):"","]"):(" "+n).replace(/\s+/g,"."))}),o?Vn(t,e,s||r,o,i):new un({ruleType:t,element:e,ancestorSelectorDescriptor:i,cssSelector:s})}var Pn,Fn=He.domUtils,$n=/_ctl\d+|ctl\d+_|^ctl\d+$/g,Ln=(K(zn,Pn=hn),zn.prototype._init=function(){this.idAttr=this.element.getAttribute("id")},zn.prototype._shouldCreate=function(){return!!this.idAttr},zn.prototype._getDescriptor=function(){if($n.test(this.idAttr)){var t=(t=Cn(this.idAttr)).replace($n,function(t){return t.replace(/\d+/,"\\d+")}),e=Fn.getTagName(this.element),n={attrName:"id",attrValueRe:new RegExp(t)};return Vn(qe.byId,this.element,e,n)}return new un({ruleType:qe.byId,element:this.element,cssSelector:"#"+_n(this.idAttr).replace(/\s/g,"\\\\ ")})},zn);function zn(){var t=Pn.call(this,qe.byId)||this;return t.idAttr=null,t}var Hn=He.domUtils,Wn=bn.utils.trim,jn=bn.nativeMethods,Gn=/^i$|^b$|^big$|^small$|^em$|^strong$|^dfn$|^code$|^samp$|^kbd$|^var$|^cite$|^abbr$|^acronym$|^sub$|^sup$|span$|^bdo$|^address$|^div$|^a$|^object$|^p$|^h\d$|^pre$|^q$|^ins$|^del$|^dt$|^dd$|^li$|^label$|^option$|^fieldset$|^legend$|^button$|^caption$|^td$|^th$|^title$/,qn=50,Yn=/['"\\]/g,Xn=/\r?\n|\r/i;function Kn(t){t=t.trim().replace(Yn,"\\$&");var e=Xn.exec(t),n=e?e.index:t.length;return Wn(t.substring(0,Math.min(n,qn)))}var Jn,Qn=He.domUtils,Zn=(K(ti,Jn=hn),ti.prototype._init=function(){this.elementText=function(t){var e=Hn.isHtmlElement(t)?jn.htmlElementInnerTextGetter.call(t):t.innerText;if(e)return Kn(e);if(Hn.isOptionElement(t)){var n=jn.nodeTextContentGetter.call(t);return n?Kn(n):""}return""}(this.element)},ti.prototype._shouldCreate=function(){return t=this.element,e=this.elementText,Gn.test(Hn.getTagName(t))?(e=Wn(e.replace(/\s+/g," ")),/\S/.test(e)):"";var t,e},ti.prototype._getDescriptor=function(){return new un({ruleType:this.type,element:this.element,cssSelector:Qn.getTagName(this.element),filterOptions:new Je("text",this.elementText),filter:(e=this.elementText,function(t){return Sn.filter(t,function(t){return-1<(Tn.htmlElementInnerTextGetter.call(t)||Tn.nodeTextContentGetter.call(t)).indexOf(e)})})});var e},ti);function ti(){var t=Jn.call(this,qe.byText)||this;return t.elementText="",t}var ei=He.domUtils,ni=He.arrayUtils,ii=bn.nativeMethods,ri="%testcafe-stored-attributes%",si=/(^alt$|^name$|^class$|^title$|^data-\S+)/,oi=/^data-ga\S+/;function ai(t,e){void 0===e&&(e=[]);var n=t[ri];if(n)return ni.filter(n,function(t){return t.name!==kn});for(var i,r=ii.elementAttributesGetter.call(t),s=[],o=0;o<r.length;o++)(i=r[o]).nodeName!==kn&&function(t,e){void 0===e&&(e=[]);var n=t.nodeName;return t.nodeValue&&si.test(n)&&-1===ni.indexOf(e,n)&&!oi.test(n)&&!ei.isHammerheadAttr(n)}(i,e)&&s.push({name:i.nodeName,value:i.nodeValue});return s}var li,ui=(K(ci,li=hn),ci.prototype._init=function(){this.elementAttributes=ai(this.element,this.customAttrNames)},ci.prototype._shouldCreate=function(){return!!this.elementAttributes.length},ci.prototype._getDescriptor=function(){return On(this.type,this.element,this.elementAttributes)},ci);function ci(t){void 0===t&&(t=[]);var e=li.call(this,qe.byAttr)||this;return e.customAttrNames=t,e.elementAttributes=[],e}var hi,di=(K(pi,hi=hn),pi.prototype._init=function(){this.className=function(t,e){for(var n,i=t[ri]||ii.elementAttributesGetter.call(t),r=0;r<i.length;r++)if((n=i[r]).name===e&&n.value)return n.value;return null}(this.element,kn)},pi.prototype._shouldCreate=function(){return!!this.className},pi.prototype._getDescriptor=function(){return On(this.type,this.element,[{name:kn,value:this.className}])},pi);function pi(){var t=hi.call(this,qe.byClassAttr)||this;return t.className="",t}var fi,mi,vi=He.domUtils,gi=He.arrayUtils,yi=(K(_i,fi=hn),_i.prototype._shouldCreate=function(t){var e=t?t.element:vi.findDocument(this.element).body;return this.parents=on(this.element,e),this.parents.push(e),this.parents.length},_i.prototype._getDescriptor=function(t){var e,n="",i=[];return e=this.element,/html|body/.test(nn.getTagName(e).toLowerCase())?i.push(new Je(tn,vi.getTagName(this.element))):i=function(t,e){for(var n=rn.reverse(sn(t,e[0])),i=e.length,r=0;r<i-1;r++){var s=sn(e[r],e[r+1]),o=s[0],a=s[1];a&&n.push(a),n.push(o)}return rn.reverse(n)}(this.element,this.parents),t?new un({ruleType:this.type,element:this.element,ancestorSelectorDescriptor:t,filterOptions:i}):(i.length&&(n=i[0].filter,gi.splice(i,0,1)),new un({ruleType:this.type,element:this.element,cssSelector:n,filterOptions:i}))},_i);function _i(){var t=fi.call(this,qe.byTagTree)||this;return t.parents=[],t}var Ci,bi=((mi={})[qe.byTagName]=new gn,mi[qe.byId]=new Ln,mi[qe.byText]=new Zn,mi[qe.byClassAttr]=new di,mi[qe.byAttr]=new ui,mi[qe.byTagTree]=new yi,mi),Ei=(K(wi,Ci=hn),wi.prototype._init=function(){var t=function(t,e){var n=t["%testcafe-custom-stored-attributes%"];if(n){var i=ni.find(n,function(t){return t.name===e});return i||null}return t.hasAttribute(e)?{name:e,value:t.getAttribute(e)}:null}(this.element,this.attrName);this.elementAttributes=t?[t]:[]},wi.prototype._shouldCreate=function(){return!!this.elementAttributes.length},wi.prototype._getDescriptor=function(){var t=On(this.type,this.element,this.elementAttributes);return t.isCustomRule=!0,t},wi);function wi(t){var e=Ci.call(this,t)||this;return e.attrName=t,e.elementAttributes=[],e}var Si=He.arrayUtils,Ti=[qe.byTagName,qe.byId,qe.byClassAttr,qe.byAttr],xi=[qe.byText,qe.byClassAttr,qe.byAttr,qe.byTagTree];function Ii(t){return t.isCustomRule||-1!==Si.indexOf(xi,t.ruleType)&&t.ruleType!==qe.byTagTree}function Ai(t){return t.editable||-1!==Si.indexOf(Ti,t.type)}var Mi=" > ";function Bi(t,e){return e?e+Mi+t:t}var Ni=1;function Ui(t){for(var e,n={},i=Ni,r=0,s=t;r<s.length;r++){var o=s[r];if(n[o.type]=i++,Ai(o))for(var a=0,l=t;a<l.length;a++){var u=l[a];!(e=u).editable&&-1===Si.indexOf(xi,e.type)||(n[Bi(u.type,o.type)]=i++)}}return n}var Ri=He.domUtils,Di=He.arrayUtils;function ki(t,e,n){for(var i=[],r=0,s=e;r<s.length;r++){var o=s[r].create(t,n);o&&i.push(o)}return i}function Vi(t,e){for(var n=[],i=0,r=e;i<r.length;i++){var s=function(t,e){for(var n=0,i=t;n<i.length;n++){var r=i[n],s=e.create(r);if(s)return s}return null}(t,r[i]);s&&n.push(s)}return n}function Oi(t){for(var n=[],e=0,i=t;e<i.length;e++){var r=i[e],s=function(e){return function(t,e){for(var n=t.length,i=0;i<n;i++)if(e(t[i]))return i;return-1}(n,function(t){return Di.join(t.stringArray,"")===Di.join(e.stringArray,"")})}(r);-1===s?n.push(r):n[s].priority>r.priority&&Di.splice(n,s,1,r)}return n}function Pi(t){function e(t){return t&&t.ancestorSelectorDescriptor?t.ancestorSelectorDescriptor.ruleType:null}for(var n=Di.filter(t,function(t){return!t.isCustom}),i=Di.filter(n,function(t){return t.ancestorSelectorDescriptor}),r=i.length,s=10-(n.length-r),o=r-1;s<r;){for(var a=e(i[o]);e(i[o-1])===a&&(Di.remove(t,i[o]),!(--r<=s));)o--;o--}}function Fi(t){void 0===t&&(t=Ye),this.rules=Di.filter(t,function(t){return!t.disabled});var e=Fi._processRules(this.rules),n=e.customRules,i=e.defaultRules;this.customRules=n,this.defaultRules=i,this.customAttrNames=[],this.customSelectorCreators=[],this.elementSelectorCreators=[],this.ancestorSelectorCreators=[],this._createCustomSelectorCreators(),this._createElementSelectorCreators(),this._createAncestorSelectorCreators(),this.rulePriority=Ui(this.rules)}var $i=(Fi._priorityComparator=function(t,e){return t.priority-e.priority},Fi._getSelectorType=function(t){var e=t.ancestorSelectorDescriptor,n=e?e.ruleType:"";return Bi(t.ruleType,n)},Fi._processRules=function(t){var e=[],n=[];return Di.filter(t,function(t){t.editable?n.push(t):e.push(t)}),{customRules:n,defaultRules:e}},Fi.prototype._createCustomSelectorCreators=function(){var e=this;Di.forEach(this.customRules,function(t){e.customAttrNames.push(t.type),e.customSelectorCreators.push(new Ei(t.type))})},Fi.prototype._createElementSelectorCreators=function(){var n=this,i=[];Di.forEach(this.defaultRules,function(t){var e=t.type===qe.byAttr?new ui(n.customAttrNames):bi[t.type];i.push(e)}),this.elementSelectorCreators=Di.concat(i,this.customSelectorCreators)},Fi.prototype._createAncestorSelectorCreators=function(){for(var t=0,e=this.customRules;t<e.length;t++){var n=e[t];this.ancestorSelectorCreators.push(new Ei(n.type))}for(var i=0,r=this.defaultRules;i<r.length;i++)Ai(n=r[i])&&(n.type===qe.byTagName?this.ancestorSelectorCreators.push(new gn(!1)):this.ancestorSelectorCreators.push(bi[n.type]))},Fi.prototype._generateCompoundSelectorDescriptor=function(t,e,n){for(var i=Di.filter(n,Ii),r=[],s=null,o=null,a=0,l=Vi(e,this.ancestorSelectorCreators);a<l.length;a++){for(var u=l[a],c=0,h=i;c<h.length;c++){var d=h[c],o=un.createFromInstance(u),s=un.createFromInstance(d,o);r.push(s)}o=un.createFromInstance(u),s=ki(t,[bi[qe.byTagTree]],u),r=Di.concat(r,s)}return r},Fi.prototype._cleanAndSortDescriptors=function(t){for(var e=[],n=0,i=t;n<i.length;n++){var r=i[n];r.makeUnique();var s=Fi._getSelectorType(r),o=this.rulePriority[s];null!==o&&(r.priority=o,e.push(r))}return Pi(e=(e=Oi(e)).sort(Fi._priorityComparator)),e},Fi.prototype._generateDescriptors=function(t){var e=ki(t,this.elementSelectorCreators),n=on(t,Ri.findDocument(t).body),i=this._generateCompoundSelectorDescriptor(t,n,e),r=Di.concat(e,i);return this._cleanAndSortDescriptors(r)},Fi.prototype.generate=function(t){var e=this._generateDescriptors(t);return Di.map(e,function(t){var e=t.stringArray,n=t.ruleType,i=t.ancestorSelectorDescriptor,r={value:Di.join(e,""),rules:[n]};return i&&r.rules.push(i.ruleType),r})},Fi.RULES=Ke,new Fi);function Li(){this.targets=new Map}var zi=(Li.prototype._remove=function(t,e){this.targets.delete(t),Le(e)},Li.prototype._setPosition=function(t,e){for(var n,i,r,s=(n=t.getBoundingClientRect(),i=eu.pageYOffset||nu.documentElement.scrollTop,r=eu.pageXOffset||nu.documentElement.scrollLeft,{top:n.top+i,left:n.left+r,height:n.height,width:n.width,bottom:n.bottom+i,right:n.right+r}),o={},a=0,l=["top","left","width","height"];a<l.length;a++){var u=l[a];o[u]=s[u]+"px"}we(e,o)},Li.prototype.highlight=function(t){var e;t&&!this.targets.has(t)&&(e=be(Ve),this.targets.set(t,e),this._setPosition(t,e),$e(e))},Li.prototype.stopHighlighting=function(){var n=this;this.targets.forEach(function(t,e){return n._remove(e,t)})},new Li),Hi=t.nativeMethods;function Wi(){this._createElements()}var ji,Gi=(Wi.prototype._createElements=function(){this.tooltip=be(Oe),this.arrow=be(Pe)},Wi.prototype._setTooltipText=function(t){Hi.nodeTextContentSetter.call(this.tooltip,t)},Wi.prototype._getTooltipLeft=function(t,e,n,i){return n<=t?i:n-e<=t?n+i-t:e+i},Wi.prototype._getArrowLeft=function(t,e,n,i){return n-e<=t+12?n+i-t:e+i+12},Wi.prototype._getVerticalPostionStyles=function(t,e,n,i){var r={},s={},o=nu.documentElement.scrollTop,a=t.height+e.height;return n.top>=a?(r.top=n.top+o-a+"px",s.top=n.top+o-e.height+"px",s.transform="none",s.visibility="visible"):i.height-n.bottom>=a?(r.top=n.bottom+o+e.height+"px",s.top=n.bottom+o+"px",s.transform="rotate(180deg)",s.visibility="visible"):(r.top=i.height+o-t.height+"px",s.top=o+"px",s.transform="node",s.visibility="hidden"),{tooltip:r,arrow:s}},Wi.prototype._getElementsStyles=function(t){var e=this.tooltip.getBoundingClientRect(),n=this.arrow.getBoundingClientRect(),i=t.getBoundingClientRect(),r={width:nu.documentElement.clientWidth,height:nu.documentElement.clientHeight},s=this._getVerticalPostionStyles(e,n,i,r),o=nu.documentElement.scrollLeft;return s.tooltip.left=this._getTooltipLeft(e.width,i.left,r.width,o)+"px",s.arrow.left=this._getArrowLeft(n.width,i.left,r.width,o)+"px",s},Wi.prototype._placeElements=function(t){var e=this._getElementsStyles(t);we(this.tooltip,e.tooltip),we(this.arrow,e.arrow)},Wi.prototype.show=function(t,e){this._setTooltipText(t),this._placeElements(e),$e(this.tooltip),$e(this.arrow)},Wi.prototype.hide=function(){Le(this.tooltip),Le(this.arrow)},new Wi),qi=t.eventSandbox.listeners,Yi=n.styleUtils,Xi=n.serviceUtils,Ki="element-piked";function Ji(){var t=ji.call(this)||this;return t.hiddenTestCafeElements=new Map,t.handlers={onClick:t._getClickHandler(),onMouseMove:t._getMouseMoveHandler()},t}var Qi=(K(Ji,ji=Xi.EventEmitter),Ji.prototype._hideTestCafeElements=function(){for(var t=0,e=h.element().children;t<e.length;t++){var n=e[t],i=Yi.get(n,"visibility");this.hiddenTestCafeElements.set(n,i),Yi.set(n,"visibility","hidden")}},Ji.prototype._showTestCafeElements=function(){this.hiddenTestCafeElements.forEach(function(t,e){Yi.set(e,"visibility",t)}),this.hiddenTestCafeElements.clear()},Ji.prototype._getClickHandler=function(){var t=this;return function(){t._showTestCafeElements(),qi.removeInternalEventBeforeListener(eu,["mousemove"],t.handlers.onMouseMove),qi.removeInternalEventBeforeListener(eu,["click"],t.handlers.onClick),t.emit(Ki,t.actualSelectors),Gi.hide()}},Ji.prototype._getMouseMoveHandler=function(){var r=this;return function(t){var e=t.clientX,n=t.clientY,i=nu.elementFromPoint(e,n);i&&i!==r.actualTarget&&(r.actualTarget=i,r.actualSelectors=$i.generate(i),zi.stopHighlighting(),zi.highlight(i),Gi.show(r.actualSelectors[0].value,i))}},Ji.prototype.start=function(t){this._hideTestCafeElements(),qi.initElementListening(eu,["mousemove","click"]),qi.addFirstInternalEventBeforeListener(eu,["mousemove"],this.handlers.onMouseMove),qi.addFirstInternalEventBeforeListener(eu,["click"],this.handlers.onClick),this.handlers.onMouseMove(t)},new Ji),Zi=n.eventUtils,tr=function(){this.element=be(Se),Zi.bind(this.element,"click",function(t){return Qi.start(t)})};function er(t){return t}var nr,ir=(function(t){function n(t){return!!o[t]}function i(t,e){this.references=t,this.transforms=e,this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0}var s=/^#*@(t|r)$/,r=(0,eval)("this"),o={Int8Array:"function"==typeof Int8Array?Int8Array:void 0,Uint8Array:"function"==typeof Uint8Array?Uint8Array:void 0,Uint8ClampedArray:"function"==typeof Uint8ClampedArray?Uint8ClampedArray:void 0,Int16Array:"function"==typeof Int16Array?Int16Array:void 0,Uint16Array:"function"==typeof Uint16Array?Uint16Array:void 0,Int32Array:"function"==typeof Int32Array?Int32Array:void 0,Uint32Array:"function"==typeof Uint32Array?Uint32Array:void 0,Float32Array:"function"==typeof Float32Array?Float32Array:void 0,Float64Array:"function"==typeof Float64Array?Float64Array:void 0},a="function"==typeof ArrayBuffer,l="function"==typeof Map,u="function"==typeof Set,c="function"==typeof Buffer,h=Array.prototype.slice,e={serialize:function(t){return JSON.stringify(t)},deserialize:function(t){return JSON.parse(t)}};function d(t,e){this.references=t,this.transformMap=e,this.activeTransformsStack=[],this.visitedRefs=Object.create(null)}i._createRefMark=function(t){var e=Object.create(null);return e["@r"]=t,e},i.prototype._createCircularCandidate=function(t,e,n){this.circularCandidates.push(t),this.circularCandidatesDescrs.push({parent:e,key:n,refIdx:-1})},i.prototype._applyTransform=function(t,e,n,i){var r=Object.create(null),s=i.toSerializable(t);return"object"==typeof s&&this._createCircularCandidate(t,e,n),r["@t"]=i.type,r.data=this._handleValue(s,e,n),r},i.prototype._handleArray=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=this._handleValue(t[n],e,n);return e},i.prototype._handlePlainObject=function(n){var i=this,r=Object.create(null);return Object.getOwnPropertyNames(n).forEach(function(t){var e=s.test(t)?"#"+t:t;r[e]=i._handleValue(n[t],r,e)}),r},i.prototype._handleObject=function(t,e,n){return this._createCircularCandidate(t,e,n),Array.isArray(t)?this._handleArray(t):this._handlePlainObject(t)},i.prototype._ensureCircularReference=function(t){var e=this.circularCandidates.indexOf(t);if(-1<e){var n=this.circularCandidatesDescrs[e];return-1===n.refIdx&&(n.refIdx=n.parent?++this.circularRefCount:0),i._createRefMark(n.refIdx)}return null},i.prototype._handleValue=function(t,e,n){var i=typeof t,r="object"==i&&null!==t;if(r){var s=this._ensureCircularReference(t);if(s)return s}for(var o=0;o<this.transforms.length;o++){var a=this.transforms[o];if(a.shouldTransform(i,t))return this._applyTransform(t,e,n,a)}return r?this._handleObject(t,e,n):t},i.prototype.transform=function(){for(var t=[this._handleValue(this.references,null,null)],e=0;e<this.circularCandidatesDescrs.length;e++){var n=this.circularCandidatesDescrs[e];0<n.refIdx&&(t[n.refIdx]=n.parent[n.key],n.parent[n.key]=i._createRefMark(n.refIdx))}return t},d.prototype._handlePlainObject=function(e){var t,n=this,i=Object.create(null),r=Object.getOwnPropertyNames(e);for(t in r.forEach(function(t){n._handleValue(e[t],e,t),s.test(t)&&(i[t.substring(1)]=e[t],delete e[t])}),i)e[t]=i[t]},d.prototype._handleTransformedObject=function(t,e,n){var i=t["@t"],r=this.transformMap[i];if(!r)throw new Error("Can't find transform for \""+i+'" type.');this.activeTransformsStack.push(t),this._handleValue(t.data,t,"data"),this.activeTransformsStack.pop(),e[n]=r.fromSerializable(t.data)},d.prototype._handleCircularSelfRefDuringTransform=function(t,e,n){var i=this.references,r=void 0;Object.defineProperty(e,n,{configurable:!0,enumerable:!0,get:function(){return void 0===r&&(r=i[t]),r},set:function(t){return r=t}})},d.prototype._handleCircularRef=function(t,e,n){-1<this.activeTransformsStack.indexOf(this.references[t])?this._handleCircularSelfRefDuringTransform(t,e,n):(this.visitedRefs[t]||(this.visitedRefs[t]=!0,this._handleValue(this.references[t],this.references,t)),e[n]=this.references[t])},d.prototype._handleValue=function(t,e,n){if("object"==typeof t&&null!==t){var i=t["@r"];if(void 0!==i)this._handleCircularRef(i,e,n);else if(t["@t"])this._handleTransformedObject(t,e,n);else if(Array.isArray(t))for(var r=0;r<t.length;r++)this._handleValue(t[r],t,r);else this._handlePlainObject(t)}},d.prototype.transform=function(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]};var p=[{type:"[[NaN]]",shouldTransform:function(t,e){return"number"===t&&isNaN(e)},toSerializable:function(){return""},fromSerializable:function(){return NaN}},{type:"[[undefined]]",shouldTransform:function(t){return"undefined"===t},toSerializable:function(){return""},fromSerializable:function(){}},{type:"[[Date]]",shouldTransform:function(t,e){return e instanceof Date},toSerializable:function(t){return t.getTime()},fromSerializable:function(t){var e=new Date;return e.setTime(t),e}},{type:"[[RegExp]]",shouldTransform:function(t,e){return e instanceof RegExp},toSerializable:function(t){var e={src:t.source,flags:""};return t.global&&(e.flags+="g"),t.ignoreCase&&(e.flags+="i"),t.multiline&&(e.flags+="m"),e},fromSerializable:function(t){return new RegExp(t.src,t.flags)}},{type:"[[Error]]",shouldTransform:function(t,e){return e instanceof Error},toSerializable:function(t){return{name:t.name,message:t.message,stack:t.stack}},fromSerializable:function(t){var e=new(r[t.name]||Error)(t.message);return e.stack=t.stack,e}},{type:"[[ArrayBuffer]]",shouldTransform:function(t,e){return a&&e instanceof ArrayBuffer},toSerializable:function(t){var e=new Int8Array(t);return h.call(e)},fromSerializable:function(t){if(a){var e=new ArrayBuffer(t.length);return new Int8Array(e).set(t),e}return t}},{type:"[[Buffer]]",shouldTransform:function(t,e){return c&&e instanceof Buffer},toSerializable:function(t){return h.call(t)},fromSerializable:function(t){return c?Buffer.from(t):t}},{type:"[[TypedArray]]",shouldTransform:function(t,e){return Object.keys(o).some(function(t){return n(t)&&e instanceof o[t]})},toSerializable:function(t){return{ctorName:t.constructor.name,arr:h.call(t)}},fromSerializable:function(t){return n(t.ctorName)?new o[t.ctorName](t.arr):t.arr}},{type:"[[Map]]",shouldTransform:function(t,e){return l&&e instanceof Map},toSerializable:function(t){var n=[];return t.forEach(function(t,e){n.push(e),n.push(t)}),n},fromSerializable:function(t){if(l){for(var e=new Map,n=0;n<t.length;n+=2)e.set(t[n],t[n+1]);return e}for(var i=[],r=0;r<t.length;r+=2)i.push([t[n],t[n+1]]);return i}},{type:"[[Set]]",shouldTransform:function(t,e){return u&&e instanceof Set},toSerializable:function(t){var e=[];return t.forEach(function(t){e.push(t)}),e},fromSerializable:function(t){if(u){for(var e=new Set,n=0;n<t.length;n++)e.add(t[n]);return e}return t}}],f=t.exports=function(t){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=t||e,this.addTransforms(p)};f.prototype.addTransforms=function(t){t=Array.isArray(t)?t:[t];for(var e=0;e<t.length;e++){var n=t[e];if(this.transformsMap[n.type])throw new Error('Transform with type "'+n.type+'" was already added.');this.transforms.push(n),this.transformsMap[n.type]=n}return this},f.prototype.removeTransforms=function(t){t=Array.isArray(t)?t:[t];for(var e=0;e<t.length;e++){var n=t[e],i=this.transforms.indexOf(n);-1<i&&this.transforms.splice(i,1),delete this.transformsMap[n.type]}return this},f.prototype.encode=function(t){var e=new i(t,this.transforms).transform();return this.serializer.serialize(e)},f.prototype.decode=function(t){var e=this.serializer.deserialize(t);return new d(e,this.transformsMap).transform()}}(nr={exports:{}}),nr.exports);function rr(t){return new ir({serialize:er,deserialize:er}).addTransforms(t)}function sr(t,e){this.code=t,this.isTestCafeError=!0,this.callsite=e||null}var or,ar,lr="E1",ur="E4",cr="E5",hr="E9",dr="E10",pr="E11",fr="E12",mr="E24",vr="E26",gr="E27",yr="E28",_r="E29",Cr="E30",br="E31",Er="E32",wr="E33",Sr="E34",Tr="E35",xr="E36",Ir="E37",Ar="E39",Mr="E40",Br="E41",Nr="E42",Ur="E43",Rr="E44",Dr="E45",kr="E46",Vr="E49",Or="E50",Pr="E51",Fr="E52",$r="E57",Lr="E64",zr="E65",Hr="E68",Wr="E69",jr="E70",Gr="E71",qr="E72",Yr="E73",Xr="E74",Kr="E76",Jr="E77",Qr="E78",Zr="E82",ts="E83",es="E90",ns="E91",is="E92",rs="E93",ss="E94",os="E95",as="E97",ls="E99",us="E100",cs="E101",hs="E102",ds=(K(ps,or=sr),ps);function ps(t,e,n){var i=or.call(this,t)||this;return i.optionName=e,i.actualValue=n,i}function fs(t,e){var n=ar.call(this,Vr,e)||this;return n.instantiationCallsiteName=t,n}K(fs,ar=sr);var ms,vs=(K(gs,ms=sr),gs);function gs(t,e){var n=ms.call(this,Or,e)||this;return n.instantiationCallsiteName=t,n}var ys,_s=(K(Cs,ys=sr),Cs);function Cs(t,e,n){var i=void 0===e?{}:e,r=i.apiFnChain,s=i.apiFnIndex,o=i.reason,a=ys.call(this,t,n)||this;return a.apiFnChain=r,a.apiFnIndex=s,a.reason=o,a}var bs,Es,ws,Ss=(K(Ts,bs=sr),Ts);function Ts(t){return bs.call(this,Pr,t)||this}function xs(t,e){return Es.call(this,Fr,e,t)||this}function Is(t,e){var n=ws.call(this,lr)||this;return n.errStack=t,n.pageDestUrl=e,n}K(xs,Es=_s),K(Is,ws=sr);var As,Ms=(K(Bs,As=sr),Bs);function Bs(t,e,n){var i=As.call(this,ur,n)||this;return i.errMsg=String(e),i.instantiationCallsiteName=t,i}var Ns,Us,Rs,Ds,ks,Vs,Os,Ps,Fs,$s,Ls,zs,Hs,Ws,js,Gs,qs,Ys,Xs,Ks,Js,Qs,Zs,to,eo,no,io,ro,so,oo,ao,lo,uo,co,ho,po,fo,mo,vo,go,yo,_o,Co,bo,Eo,wo,So,To,xo,Io,Ao,Mo,Bo,No=(K(Uo,Ns=sr),Uo);function Uo(t,e,n,i){var r=Ns.call(this,cr,i)||this;return r.errMsg=String(e),r.property=n,r.instantiationCallsiteName=t,r}function Ro(t){var e=Us.call(this,Lr)||this;return e.errMsg=String(t),e}function Do(t,e){var n=Rs.call(this,zr)||this;return n.errMsg=String(t),n.moduleName=e,n}function ko(t,e){return Ds.call(this,hr,t,e)||this}function Vo(t,e){return ks.call(this,dr,t,e)||this}function Oo(t,e){return Vs.call(this,pr,t,e)||this}function Po(t,e){return Os.call(this,fr,t,e)||this}function Fo(t,e){return Ps.call(this,es,t,e)||this}function $o(t,e){return Fs.call(this,as,t,e)||this}function Lo(t,e){return $s.call(this,ns,t,e)||this}function zo(t,e){return Ls.call(this,is,t,e)||this}function Ho(t,e){return zs.call(this,rs,t,e)||this}function Wo(t,e){return Hs.call(this,ss,t,e)||this}function jo(t,e){return Ws.call(this,os,t,e)||this}function Go(t,e){return js.call(this,ls,t,e)||this}function qo(t,e,n){var i=Gs.call(this,us)||this;return i.objectName=t,i.propertyName=e,i.availableProperties=n,i}function Yo(t,e){return qs.call(this,mr,e,t)||this}function Xo(t,e){return Ys.call(this,vr,e,t)||this}function Ko(t){var e=Xs.call(this,gr)||this;return e.nodeDescription=t,e}function Jo(t,e){var n=Ks.call(this,yr,e)||this;return n.argumentName=t,n}function Qo(t){return Js.call(this,cs,t)||this}function Zo(t,e){var n=Qs.call(this,_r,e)||this;return n.argumentName=t,n}function ta(t,e){var n=Zs.call(this,Cr)||this;return n.argumentName=t,n.nodeDescription=e,n}function ea(){return to.call(this,br)||this}function na(){return eo.call(this,Er)||this}function ia(t){var e=no.call(this,wr)||this;return e.argumentName=t,e}function ra(){return io.call(this,Tr)||this}function sa(t){var e=ro.call(this,xr)||this;return e.argumentName=t,e}function oa(t,e){var n=so.call(this,Ir)||this;return n.filePaths=t,n.scannedFilePaths=e,n}function aa(){return oo.call(this,Sr)||this}function la(t,e){var n=ao.call(this,Br)||this;return n.properties=t?"scrollTargetY property":e?"scrollTargetX property":"scrollTargetX and scrollTargetY properties",n}function ua(t,e){var n=lo.call(this,$r)||this;return t<=0?e<=0?(n.verb="are",n.dimensions="width and height"):(n.verb="is",n.dimensions="width"):(n.verb="is",n.dimensions="height"),n}function ca(t){return uo.call(this,Mr,t)||this}function ha(){return co.call(this,Ar)||this}function da(){return ho.call(this,Nr)||this}function pa(){return po.call(this,Wr)||this}function fa(){return fo.call(this,Hr)||this}function ma(){return mo.call(this,jr)||this}function va(){return vo.call(this,Gr)||this}function ga(){return go.call(this,Yr)||this}function ya(){return yo.call(this,Zr)||this}function _a(t){var e=_o.call(this,Qr)||this;return e.errMsg=t,e}function Ca(){return Co.call(this,Xr)||this}function ba(){return bo.call(this,Kr)||this}function Ea(){return Eo.call(this,Jr)||this}function wa(){return wo.call(this,qr)||this}function Sa(){return So.call(this,ts)||this}function Ta(){return To.call(this,Ur)||this}function xa(){return xo.call(this,Rr)||this}function Ia(t,e){var n=Io.call(this,Dr)||this;return n.dialogType=t,n.pageUrl=e,n}function Aa(t,e,n){var i=Ao.call(this,kr)||this;return i.dialogType=t,i.errMsg=e,i.pageUrl=n,i}function Ma(){return Mo.call(this,hs)||this}K(Ro,Us=sr),K(Do,Rs=sr),K(ko,Ds=ds),K(Vo,ks=ds),K(Oo,Vs=ds),K(Po,Os=ds),K(Fo,Ps=ds),K($o,Fs=ds),K(Lo,$s=ds),K(zo,Ls=ds),K(Ho,zs=ds),K(Wo,Hs=ds),K(jo,Ws=ds),K(Go,js=ds),K(qo,Gs=sr),K(Yo,qs=_s),K(Xo,Ys=_s),K(Ko,Xs=sr),K(Jo,Ks=_s),K(Qo,Js=sr),K(Zo,Qs=_s),K(ta,Zs=sr),K(ea,to=sr),K(na,eo=sr),K(ia,no=sr),K(ra,io=sr),K(sa,ro=sr),K(oa,so=sr),K(aa,oo=sr),K(la,ao=sr),K(ua,lo=sr),K(ca,uo=sr),K(ha,co=sr),K(da,ho=sr),K(pa,po=sr),K(fa,fo=sr),K(ma,mo=sr),K(va,vo=sr),K(ga,go=sr),K(ya,yo=sr),K(_a,_o=sr),K(Ca,Co=sr),K(ba,bo=sr),K(Ea,Eo=sr),K(wa,wo=sr),K(Sa,So=sr),K(Ta,To=sr),K(xa,xo=sr),K(Ia,Io=sr),K(Aa,Ao=sr),K(Ma,Mo=sr);var Ba=1,Na=2,Ua=3,Ra=((Bo={})[Ba]=/^\.filterVisible\(\)$/,Bo[Na]=/^\.filterHidden\(\)$/,Bo[Ua]=/^\.nth\(\d+\)$/,Bo);function Da(){this._err=null}var ka=(Object.defineProperty(Da.prototype,"error",{get:function(){return this._err},set:function(t){null===this._err&&(this._err=t)},enumerable:!1,configurable:!0}),Da.prototype.filter=function(t,e,n){if(e.filterVisible&&(t=t.filter(c.positionUtils.isElementVisible),this._assertFilterError(t,n,Ba)),e.filterHidden&&(t=t.filter(function(t){return!c.positionUtils.isElementVisible(t)}),this._assertFilterError(t,n,Na)),e.counterMode)return null===e.index?t.length:Da._getNodeByIndex(t,e.index)?1:0;var i;if(e.collectionMode)return null!==e.index&&(t=(i=Da._getNodeByIndex(t,e.index))?[i]:[],this._assertFilterError(t,n,Ua)),t;var r=Da._getNodeByIndex(t,e.index||0);return r||(this.error=Da._getErrorItem(n,Ua)),r},Da.prototype.cast=function(t){if(null==t)return[];if(t instanceof u.nativeMethods.Node)return[t];if(function(t){if(u.nativeMethods.isArray(t)){for(var e=0;e<t.length;e++)if(!(t[e]instanceof u.nativeMethods.Node))return;return 1}}(t))return t;if((e=t)instanceof u.nativeMethods.HTMLCollection||e instanceof u.nativeMethods.NodeList)return function(t){for(var e=t.length,n=[],i=0;i<e;i++)n.push(t[i]);return n}(t);var e;throw new Ss},Da.prototype._assertFilterError=function(t,e,n){0===t.length&&(this.error=Da._getErrorItem(e,n))},Da._getErrorItem=function(t,e){var n=t.apiFnChain,i=t.apiFnID;if(e)for(var r=i;r<n.length;r++)if(Ra[e].test(n[r]))return r;return null},Da._getNodeByIndex=function(t,e){return e<0?t[t.length+e]:t[e]},new Da);function Va(t,e){return new u.nativeMethods.Function("fnCode","__dependencies$","Promise","RegExp",'"use strict"; return eval(fnCode)')(t,e,u.Promise,RegExp)}var Oa=(Pa.prototype.shouldTransform=function(t){return"function"===t},Pa.prototype.toSerializable=function(){return""},Pa.prototype.fromSerializable=function(t){var e=t.fnCode,n=t.dependencies;return"filterOptions"in n&&(n.selectorFilter=ka),Va(e,n)},Pa);function Pa(){this.type="Function"}var Fa=($a.prototype.shouldTransform=function(t,e){if(e instanceof u.nativeMethods.Node)throw new vs(this._instantiationCallsiteName);return!1},$a.prototype.toSerializable=function(){},$a.prototype.fromSerializable=function(){},$a);function $a(t){this.type="Node",this._instantiationCallsiteName=t}var La=(za.prototype.getResult=function(){var e=this;return u.Promise.resolve().then(function(){var t=e.replicator.decode(e.command.args);return e._executeFn(t)}).catch(function(t){throw t.isTestCafeError||(t=new Ms(e.command.instantiationCallsiteName,t)),t})},za.prototype.encodeResult=function(t){return this.replicator.encode(t)},za.prototype._createReplicator=function(){return rr([new Fa(this.command.instantiationCallsiteName),new Oa])},za.prototype._executeFn=function(t){return this.fn.apply(eu,t)},za);function za(t){this.command=t,this.replicator=this._createReplicator(),this.dependencies=this.replicator.decode(t.dependencies),this.fn=Va(t.fnCode,this.dependencies)}var Ha=["nodeType","textContent","childNodeCount","hasChildNodes","childElementCount","hasChildElements"],Wa=["tagName","attributes"],ja=["tagName","visible","focused","attributes","boundingClientRect","classNames","style","innerText","namespaceURI","id","value","checked","selected","selectedIndex","scrollWidth","scrollHeight","scrollLeft","scrollTop","offsetWidth","offsetHeight","offsetLeft","offsetTop","clientWidth","clientHeight","clientLeft","clientTop"],Ga={childNodeCount:function(t){return t.childNodes.length},hasChildNodes:function(t){return!!Ga.childNodeCount(t)},childElementCount:function(t){var e;return(null===(e=t.children)||void 0===e?void 0:e.length)||0},hasChildElements:function(t){return!!Ga.childElementCount(t)}},qa=(Ya.prototype._initializeProperties=function(t,e,n){for(var i=0,r=e;i<r.length;i++){var s=r[i],o=n[s];this[s]=o?o(t):t[s]}},Ya);function Ya(){}var Xa,Ka=(K(Ja,Xa=qa),Ja);function Ja(t){var e=Xa.call(this)||this;return e._initializeProperties(t,Ha,Ga),e}var Qa,Za={tagName:function(t){return t.tagName.toLowerCase()},visible:function(t){return c.positionUtils.isElementVisible(t)},focused:function(t){return u.utils.dom.getActiveElement()===t},attributes:function(t){for(var e=t.attributes,n={},i=e.length-1;0<=i;i--)n[e[i].name]=e[i].value;return n},boundingClientRect:function(t){var e=t.getBoundingClientRect();return{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width,height:e.height}},classNames:function(t){var e=t.className;return"string"==typeof e.animVal&&(e=e.animVal),e.replace(/^\s+|\s+$/g,"").split(/\s+/g)},style:function(t){for(var e={},n=eu.getComputedStyle(t),i=0;i<n.length;i++){var r=n[i];e[r]=n[r]}return e},innerText:function(t){return t.innerText}};function tl(t){var e=Qa.call(this)||this;return e._initializeProperties(t,Wa,Za),e}K(tl,Qa=qa);var el,nl=(K(il,el=Ka),il);function il(t){var e=el.call(this,t)||this;return e._initializeProperties(t,ja,Za),e}var rl=(sl.prototype._extend=function(t,e){for(var n=0,i=u.nativeMethods.objectKeys(this._customDOMProperties);n<i.length;n++){var r=i[n];try{t[r]=this._customDOMProperties[r](e)}catch(t){throw new No(this._instantiationCallsiteName,t,r)}}},sl.prototype.shouldTransform=function(t,e){return e instanceof u.nativeMethods.Node},sl.prototype.toSerializable=function(t){var e=new(1===t.nodeType?nl:Ka)(t);return this._extend(e,t),e},sl.prototype.fromSerializable=function(){},sl);function sl(t,e){void 0===t&&(t={}),this.type="Node",this._customDOMProperties=t,this._instantiationCallsiteName=e}var ol,al=(K(ll,ol=La),ll.prototype._createReplicator=function(){return rr([new Oa])},ll.prototype._getTimeoutErrorParams=function(t){return{apiFnIndex:ka.error,apiFnChain:this.command.apiFnChain,reason:c.positionUtils.getHiddenReason(t)}},ll.prototype._getTimeoutError=function(t){return t?this.createIsInvisibleError:this.createNotFoundError},ll.prototype._validateElement=function(o,a){var l=this;return u.Promise.resolve().then(function(){return ol.prototype._executeFn.call(l,o)}).then(function(t){var e=t,n=!!e,i=!l.command.visibilityCheck||e&&c.positionUtils.isElementVisible(e),r=u.nativeMethods.dateNow()-a>=l.timeout;if(n&&(i||u.utils.dom.isShadowRoot(e)))return e;if(!r)return c.delay(200).then(function(){return l._validateElement(o,a)});var s=l.getVisibleValueMode?null:l._getTimeoutError(n);if(s)throw s(l._getTimeoutErrorParams(e));return null})},ll.prototype._executeFn=function(t){return this.counterMode?ol.prototype._executeFn.call(this,t):this._validateElement(t,u.nativeMethods.dateNow())},ll);function ll(t,e,n,i,r){var s,o=ol.call(this,t)||this;o.createNotFoundError=i,o.createIsInvisibleError=r,o.timeout="number"==typeof t.timeout?t.timeout:e,o.counterMode=o.dependencies.filterOptions.counterMode,o.getVisibleValueMode=o.dependencies.filterOptions.getVisibleValueMode,o.dependencies.selectorFilter=ka,n&&(s=u.nativeMethods.dateNow()-n,o.timeout=Math.max(o.timeout-s,0));var a=o.dependencies.customDOMProperties;return o.replicator.addTransforms([new rl(a,t.instantiationCallsiteName)]),o}var ul={testCafeDriver:"%testCafeDriver%",testCafeIframeDriver:"%testCafeIframeDriver%",testCafeEmbeddingUtils:"%testCafeEmbeddingUtils%",testCafeDriverInstance:"%testCafeDriverInstance%"},cl=5e3;function hl(){return null}function dl(){return null}function pl(n){return J(this,void 0,void 0,function(){var e;return Q(this,function(t){switch(t.label){case 0:return e=u.nativeMethods.date(),[4,new al(n,cl,e,hl,dl).getResult()];case 1:return[2,t.sent()]}})})}function fl(e){return J(this,void 0,void 0,function(){return Q(this,function(t){switch(t.label){case 0:return[4,function(n){return J(this,void 0,void 0,function(){var e;return Q(this,function(t){return e=eu[ul.testCafeDriverInstance].communicationUrls,[2,c.browser.parseSelector(e.parseSelector,u.createNativeXHR,n)]})})}(e)];case 1:return[2,pl(t.sent()).catch(function(){return null})]}})})}var ml=t.nativeMethods;function vl(t){return ml.isArray(t)?t:[t]}var gl,yl=t.eventSandbox.listeners,_l=n.serviceUtils,Cl="list-changed",bl="selector-selected";function El(){var e=gl.call(this)||this;return e._pickedSelectors=[],e.element=be(Ue),Qi.on(Ki,function(t){e.pickedSelectors=t}),e}var wl=(K(El,gl=_l.EventEmitter),Object.defineProperty(El.prototype,"pickedSelectors",{get:function(){return this._pickedSelectors},set:function(t){void 0===t&&(t=[]),this._pickedSelectors!==t&&(this._pickedSelectors=t,this.emit(Cl,t))},enumerable:!1,configurable:!0}),El.prototype._renderSelectors=function(){var n=this;this.pickedSelectors.forEach(function(t){var e=be({text:t.value,class:"selector-value"});n.element.appendChild(e)}),this.renderedSelectors=this.pickedSelectors},El.prototype._clear=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.renderedSelectors=null},El.prototype._addClickListener=function(){var e=this,n=function(t){Le(e.element),t.target.parentElement===e.element&&e.emit(bl,t.target.innerText),yl.removeInternalEventBeforeListener(eu,["click"],n)};yl.addFirstInternalEventBeforeListener(eu,["click"],n)},El.prototype.show=function(t){var e,n=t.left,i=t.bottom,r=t.width;this.pickedSelectors&&0!==this.pickedSelectors.length&&(this.pickedSelectors!==this.renderedSelectors&&(this._clear(),this._renderSelectors()),e={left:n+"px",bottom:i+"px",width:r+"px"},$e(this.element),we(this.element,e),this._addClickListener())},El.prototype.clear=function(){this.pickedSelectors=null},new El),Sl=t.nativeMethods,Tl=t.shadowUI,xl=n.eventUtils,Il="enabled",Al={notFound:"not-found",invalid:"invalid",ok:"ok"},Ml=(Object.defineProperty(Bl.prototype,"value",{get:function(){return Sl.inputValueGetter.call(this.input)},set:function(t){Sl.inputValueSetter.call(this.input,t)},enumerable:!1,configurable:!0}),Bl.prototype._createElements=function(){this.element=be(Ae),this.input=be(Te),this.indicator=be(xe),this.expandButton=be(Ie),this.element.appendChild(this.input),this.element.appendChild(this.indicator),this.element.appendChild(this.expandButton)},Bl.prototype._addEventListeners=function(){var e=this;xl.bind(this.expandButton,"click",function(){return e._expandSelectorsList()}),xl.bind(this.input,"input",function(){return e._onSelectorTyped()}),xl.bind(this.input,"focus",function(){return e._onFocusInput()}),xl.bind(this.input,"blur",function(){return zi.stopHighlighting()}),wl.on(Cl,function(t){e._updateExpandButton(t)}),wl.on(bl,function(t){e._setSelectorInputValue({value:t})}),Qi.on(Ki,function(t){e._setSelectorInputValue(t[0])})},Bl.prototype._setMatchIndicatorText=function(t){Sl.nodeTextContentSetter.call(this.indicator,t)},Bl.prototype._setMatchIndicatorClass=function(t){for(var e in Al)Tl.removeClass(this.indicator,Al[e]);Tl.addClass(this.indicator,t)},Bl.prototype._indicateMatches=function(t){return null===t?(this._setMatchIndicatorText("Invalid Selector"),void this._setMatchIndicatorClass(Al.invalid)):0===t.length?(this._setMatchIndicatorText("No Matching Elements"),void this._setMatchIndicatorClass(Al.notFound)):(this._setMatchIndicatorText("Found: ".concat(t.length)),void this._setMatchIndicatorClass(Al.ok))},Bl.prototype._highlightElements=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];zi.highlight(i)}},Bl.prototype._setSelectorInputValue=function(t){this.value=t.value,this.input.focus()},Bl.prototype._expandSelectorsList=function(){var t=this.element.getBoundingClientRect(),e=t.left,n=t.top,i={left:e,width:t.width,bottom:nu.documentElement.clientHeight-n+1};wl.show(i)},Bl.prototype._updateExpandButton=function(t){t&&t.length?Tl.addClass(this.expandButton,Il):Tl.removeClass(this.expandButton,Il)},Bl.prototype._onSelectorTyped=function(){wl.clear(),this._onFocusInput()},Bl.prototype._onFocusInput=function(){return J(this,void 0,void 0,function(){var e;return Q(this,function(t){switch(t.label){case 0:return zi.stopHighlighting(),this.value?[4,fl(this.value)]:(this._indicateMatches([]),[2]);case 1:return e=t.sent(),this._indicateMatches(e),this._highlightElements(e),[2]}})})},Bl.prototype.debugSelector=function(i){return J(this,void 0,void 0,function(){var e,n;return Q(this,function(t){switch(t.label){case 0:return zi.stopHighlighting(),this.value=i.apiFnChain.join(""),n=vl,[4,pl(i)];case 1:return e=n.apply(void 0,[t.sent()]),this._indicateMatches(e),this._highlightElements(e),[2]}})})},Bl);function Bl(){this._createElements(),this._addEventListeners()}var Nl=t.nativeMethods,Ul=n.eventUtils,Rl="Copy",Dl="Copied!",kl=(Vl.prototype._copySelector=function(){var t,e;t=this.sourceElement.value,$e(e=be(Fe)),e.value=t,e.select(),nu.execCommand("copy"),Le(e),this._animate()},Vl.prototype._animate=function(){var t=this;this._changeAppearance(Dl,"bold"),Nl.setTimeout.call(eu,function(){return t._resetAppearance()},1200)},Vl.prototype._resetAppearance=function(){this._changeAppearance(Rl,"")},Vl.prototype._changeAppearance=function(t,e){Nl.inputValueSetter.call(this.element,t),we(this.element,{fontWeight:e})},Vl);function Vl(t){var e=this;this.element=be(Me),this.sourceElement=t,Ul.bind(this.element,"click",function(){return e._copySelector()})}var Ol=t.nativeMethods,Pl=n.eventUtils,Fl=($l.prototype._showAndHide=function(t){Ol.elementClassListGetter.call(t).toggle("selector-inspector-panel--hidden-hammerhead-shadow-ui")},$l);function $l(t){var e=this,n=be(Ne);this.element=be(Be),this.element.appendChild(n),this.element.appendChild(be(Re)),Pl.bind(this.element,"click",function(){return e._showAndHide(t)})}var Ll=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this;this.element=be(ke),t.forEach(function(t){return n.element.appendChild(t)})},zl=(Hl.prototype.show=function(t){this.selectorInputContainer.debugSelector(t),this.element.parentElement||h.insertFirstChildToPanelsContainer(this.element),we(this.element,{display:"flex"})},Hl.prototype.hide=function(){we(this.element,{display:"none"})},Hl);function Hl(){this.elementPicker=Qi,this.element=be(De),this.selectorInputContainer=new Ml;var t=new tr,e=new kl(this.selectorInputContainer),n=new Ll(t.element,this.selectorInputContainer.element,e.element),i=new Fl(this.element);this.element.appendChild(n.element),this.element.appendChild(i.element)}var Wl=t.Promise,jl=t.eventSandbox.message,Gl=n.sendRequestToFrame,ql="ui|hide|request",Yl="ui|hide|response",Xl="ui|show|request",Kl="ui|show|response";jl.on(jl.SERVICE_MSG_RECEIVED_EVENT,function(t){t.message.cmd===ql?(h.hide(),jl.sendServiceMsg({cmd:Yl},t.source)):t.message.cmd===Xl&&(h.show(),jl.sendServiceMsg({cmd:Kl},t.source))});var Jl={};Jl.uiRoot=h,Jl.cursorUI=ve,Jl.iframeCursorUI=ge,Jl.selectElement=i,Jl.modalBackground=D,Jl.ProgressPanel=q,Jl.StatusBar=Gt,Jl.IframeStatusBar=Jt,Jl.SelectorInspectorPanel=zl,Jl.hide=function(t){return t?Gl({cmd:ql},Yl,eu.top):(h.hide(),Wl.resolve())},Jl.show=function(t){return t?Gl({cmd:Xl},Kl,eu.top):(h.show(),Wl.resolve())},Jl.showScreenshotMark=function(t){return ye.show(t)},Jl.hideScreenshotMark=function(){return ye.hide()};var Ql=t.nativeMethods,Zl=t.EVENTS.evalIframeScript;Ql.objectDefineProperty(eu,"%testCafeUI%",{configurable:!0,value:Jl}),t.on(Zl,function(t){return tu(Ql.contentWindowGetter.call(t.iframe))})}(eu["%hammerhead%"],eu["%testCafeCore%"],eu["%hammerhead%"].Promise)}(window);
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const base_unit_1 = __importDefault(require("./base-unit"));
const unit_type_1 = __importDefault(require("./unit-type"));
const BORROWED_TEST_PROPERTIES = ['skip', 'only', 'pageUrl', 'authCredentials', 'disableConcurrency'];
class TestFile extends base_unit_1.default {
    constructor(filename) {
        super(unit_type_1.default.testFile);
        this.filename = filename;
        this.currentFixture = null;
        this.collectedTests = [];
    }
    getTests() {
        this.collectedTests.forEach(test => {
            BORROWED_TEST_PROPERTIES.forEach(prop => {
                // TODO: add index signature to the Test and Fixture classes
                //@ts-ignore
                test[prop] = test[prop] || test.fixture[prop];
            });
            const testFixture = test.fixture;
            if (test.disablePageReloads === void 0)
                test.disablePageReloads = testFixture.disablePageReloads;
            if (!test.disablePageCaching)
                test.disablePageCaching = testFixture.disablePageCaching;
        });
        return this.collectedTests;
    }
}
exports.default = TestFile;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdC1maWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2FwaS9zdHJ1Y3R1cmUvdGVzdC1maWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsNERBQW1DO0FBQ25DLDREQUFtQztBQUluQyxNQUFNLHdCQUF3QixHQUFHLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsaUJBQWlCLEVBQUUsb0JBQW9CLENBQUMsQ0FBQztBQUV0RyxNQUFxQixRQUFTLFNBQVEsbUJBQVE7SUFLMUMsWUFBb0IsUUFBZ0I7UUFDaEMsS0FBSyxDQUFDLG1CQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFekIsSUFBSSxDQUFDLFFBQVEsR0FBUyxRQUFRLENBQUM7UUFDL0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7UUFDM0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxFQUFFLENBQUM7SUFDN0IsQ0FBQztJQUVNLFFBQVE7UUFDWCxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUMvQix3QkFBd0IsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ3BDLDREQUE0RDtnQkFDNUQsWUFBWTtnQkFDWixJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbEQsQ0FBQyxDQUFDLENBQUM7WUFFSCxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsT0FBa0IsQ0FBQztZQUU1QyxJQUFJLElBQUksQ0FBQyxrQkFBa0IsS0FBSyxLQUFLLENBQUM7Z0JBQ2xDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxXQUFXLENBQUMsa0JBQWtCLENBQUM7WUFFN0QsSUFBSSxDQUFDLElBQUksQ0FBQyxrQkFBa0I7Z0JBQ3hCLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxXQUFXLENBQUMsa0JBQWtCLENBQUM7UUFDakUsQ0FBQyxDQUFDLENBQUM7UUFFSCxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUM7SUFDL0IsQ0FBQztDQUNKO0FBaENELDJCQWdDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlVW5pdCBmcm9tICcuL2Jhc2UtdW5pdCc7XG5pbXBvcnQgVW5pdFR5cGUgZnJvbSAnLi91bml0LXR5cGUnO1xuaW1wb3J0IEZpeHR1cmUgZnJvbSAnLi9maXh0dXJlJztcbmltcG9ydCBUZXN0IGZyb20gJy4vdGVzdCc7XG5cbmNvbnN0IEJPUlJPV0VEX1RFU1RfUFJPUEVSVElFUyA9IFsnc2tpcCcsICdvbmx5JywgJ3BhZ2VVcmwnLCAnYXV0aENyZWRlbnRpYWxzJywgJ2Rpc2FibGVDb25jdXJyZW5jeSddO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXN0RmlsZSBleHRlbmRzIEJhc2VVbml0IHtcbiAgICBwdWJsaWMgZmlsZW5hbWU6IHN0cmluZztcbiAgICBwdWJsaWMgY3VycmVudEZpeHR1cmU6IEZpeHR1cmUgfCBudWxsO1xuICAgIHB1YmxpYyBjb2xsZWN0ZWRUZXN0czogVGVzdFtdO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yIChmaWxlbmFtZTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFVuaXRUeXBlLnRlc3RGaWxlKTtcblxuICAgICAgICB0aGlzLmZpbGVuYW1lICAgICAgID0gZmlsZW5hbWU7XG4gICAgICAgIHRoaXMuY3VycmVudEZpeHR1cmUgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbGxlY3RlZFRlc3RzID0gW107XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRlc3RzICgpOiBUZXN0W10ge1xuICAgICAgICB0aGlzLmNvbGxlY3RlZFRlc3RzLmZvckVhY2godGVzdCA9PiB7XG4gICAgICAgICAgICBCT1JST1dFRF9URVNUX1BST1BFUlRJRVMuZm9yRWFjaChwcm9wID0+IHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBhZGQgaW5kZXggc2lnbmF0dXJlIHRvIHRoZSBUZXN0IGFuZCBGaXh0dXJlIGNsYXNzZXNcbiAgICAgICAgICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICB0ZXN0W3Byb3BdID0gdGVzdFtwcm9wXSB8fCB0ZXN0LmZpeHR1cmVbcHJvcF07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgdGVzdEZpeHR1cmUgPSB0ZXN0LmZpeHR1cmUgYXMgRml4dHVyZTtcblxuICAgICAgICAgICAgaWYgKHRlc3QuZGlzYWJsZVBhZ2VSZWxvYWRzID09PSB2b2lkIDApXG4gICAgICAgICAgICAgICAgdGVzdC5kaXNhYmxlUGFnZVJlbG9hZHMgPSB0ZXN0Rml4dHVyZS5kaXNhYmxlUGFnZVJlbG9hZHM7XG5cbiAgICAgICAgICAgIGlmICghdGVzdC5kaXNhYmxlUGFnZUNhY2hpbmcpXG4gICAgICAgICAgICAgICAgdGVzdC5kaXNhYmxlUGFnZUNhY2hpbmcgPSB0ZXN0Rml4dHVyZS5kaXNhYmxlUGFnZUNhY2hpbmc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmNvbGxlY3RlZFRlc3RzO1xuICAgIH1cbn1cbiJdfQ==
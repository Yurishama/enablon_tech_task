"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getActiveTab = exports.getFirstTab = exports.getTabById = exports.getTabs = void 0;
const chrome_remote_interface_1 = __importDefault(require("chrome-remote-interface"));
const DEVTOOLS_TAB_URL_REGEX = /^devtools:\/\/devtools/;
async function getTabs(port) {
    const tabs = await chrome_remote_interface_1.default.List({ port });
    return tabs.filter(t => t.type === 'page' && !DEVTOOLS_TAB_URL_REGEX.test(t.url));
}
exports.getTabs = getTabs;
async function getTabById(port, id) {
    const tabs = await getTabs(port);
    return tabs.find(tab => tab.id === id);
}
exports.getTabById = getTabById;
async function getFirstTab(port) {
    const tabs = await getTabs(port);
    return tabs[0];
}
exports.getFirstTab = getFirstTab;
async function getActiveTab(port, activeWindowId) {
    const tabs = await getTabs(port);
    if (activeWindowId)
        return tabs.find(t => t.title.includes(activeWindowId));
    return tabs[0];
}
exports.getActiveTab = getActiveTab;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvYnJvd3Nlci9wcm92aWRlci9idWlsdC1pbi9kZWRpY2F0ZWQvY2hyb21lL2NkcC1jbGllbnQvdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsc0ZBQW1FO0FBRW5FLE1BQU0sc0JBQXNCLEdBQUcsd0JBQXdCLENBQUM7QUFFakQsS0FBSyxVQUFVLE9BQU8sQ0FBRSxJQUFZO0lBQ3ZDLE1BQU0sSUFBSSxHQUFHLE1BQU0saUNBQVksQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBRS9DLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssTUFBTSxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3RGLENBQUM7QUFKRCwwQkFJQztBQUVNLEtBQUssVUFBVSxVQUFVLENBQUUsSUFBWSxFQUFFLEVBQVU7SUFDdEQsTUFBTSxJQUFJLEdBQUcsTUFBTSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFakMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQWUsQ0FBQztBQUN6RCxDQUFDO0FBSkQsZ0NBSUM7QUFFTSxLQUFLLFVBQVUsV0FBVyxDQUFFLElBQVk7SUFDM0MsTUFBTSxJQUFJLEdBQUcsTUFBTSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFakMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkIsQ0FBQztBQUpELGtDQUlDO0FBRU0sS0FBSyxVQUFVLFlBQVksQ0FBRSxJQUFZLEVBQUUsY0FBc0I7SUFDcEUsTUFBTSxJQUFJLEdBQUcsTUFBTSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFakMsSUFBSSxjQUFjO1FBQ2QsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLENBQWUsQ0FBQztJQUUxRSxPQUFPLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuQixDQUFDO0FBUEQsb0NBT0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcmVtb3RlQ2hyb21lLCB7IFRhcmdldEluZm8gfSBmcm9tICdjaHJvbWUtcmVtb3RlLWludGVyZmFjZSc7XG5cbmNvbnN0IERFVlRPT0xTX1RBQl9VUkxfUkVHRVggPSAvXmRldnRvb2xzOlxcL1xcL2RldnRvb2xzLztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRhYnMgKHBvcnQ6IG51bWJlcik6IFByb21pc2U8VGFyZ2V0SW5mb1tdPiB7XG4gICAgY29uc3QgdGFicyA9IGF3YWl0IHJlbW90ZUNocm9tZS5MaXN0KHsgcG9ydCB9KTtcblxuICAgIHJldHVybiB0YWJzLmZpbHRlcih0ID0+IHQudHlwZSA9PT0gJ3BhZ2UnICYmICFERVZUT09MU19UQUJfVVJMX1JFR0VYLnRlc3QodC51cmwpKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRhYkJ5SWQgKHBvcnQ6IG51bWJlciwgaWQ6IHN0cmluZyk6IFByb21pc2U8VGFyZ2V0SW5mbz4ge1xuICAgIGNvbnN0IHRhYnMgPSBhd2FpdCBnZXRUYWJzKHBvcnQpO1xuXG4gICAgcmV0dXJuIHRhYnMuZmluZCh0YWIgPT4gdGFiLmlkID09PSBpZCkgYXMgVGFyZ2V0SW5mbztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEZpcnN0VGFiIChwb3J0OiBudW1iZXIpOiBQcm9taXNlPFRhcmdldEluZm8+IHtcbiAgICBjb25zdCB0YWJzID0gYXdhaXQgZ2V0VGFicyhwb3J0KTtcblxuICAgIHJldHVybiB0YWJzWzBdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWN0aXZlVGFiIChwb3J0OiBudW1iZXIsIGFjdGl2ZVdpbmRvd0lkOiBzdHJpbmcpOiBQcm9taXNlPFRhcmdldEluZm8+IHtcbiAgICBjb25zdCB0YWJzID0gYXdhaXQgZ2V0VGFicyhwb3J0KTtcblxuICAgIGlmIChhY3RpdmVXaW5kb3dJZClcbiAgICAgICAgcmV0dXJuIHRhYnMuZmluZCh0ID0+IHQudGl0bGUuaW5jbHVkZXMoYWN0aXZlV2luZG93SWQpKSBhcyBUYXJnZXRJbmZvO1xuXG4gICAgcmV0dXJuIHRhYnNbMF07XG59XG4iXX0=